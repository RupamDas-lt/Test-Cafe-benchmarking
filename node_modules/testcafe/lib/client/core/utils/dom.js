"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.isIframeWindow = exports.isDocumentElement = exports.getDocumentElement = exports.getImgMapName = exports.getNodeText = exports.isNodeEqual = exports.contains = exports.isShadowElement = exports.setElementValue = exports.getElementValue = exports.setTextAreaValue = exports.setInputValue = exports.getTextAreaValue = exports.getInputValue = exports.getChildNodesLength = exports.getChildrenLength = exports.getCommonAncestor = exports.isEditableFormElement = exports.findIframeByWindow = exports.isTopWindow = exports.isIFrameWindowInDOM = exports.remove = exports.getFocusableParent = exports.getElementDescription = exports.isTheSameNode = exports.getElementIndexInParent = exports.isOptionGroupElement = exports.isElementContainsNode = exports.isEditableElement = exports.blocksImplicitSubmission = exports.getTextareaPositionByLineAndOffset = exports.getTextareaLineNumberByPosition = exports.getTextareaIndentInLine = exports.containsElement = exports.getTabIndexAttributeIntValue = exports.getFocusableElements = exports.getParentExceptShadowRoot = exports.getTopSameDomainWindow = exports.findParent = exports.getParents = exports.closest = exports.getTagName = exports.getMapContainer = exports.getScrollbarSize = exports.isElementReadOnly = exports.isHammerheadAttr = exports.isElementFocusable = exports.isShadowRoot = exports.isShadowUIElement = exports.isDomElement = exports.isContentEditableElement = exports.isTextEditableElementAndEditingAllowed = exports.isTextEditableElement = exports.isTextEditableInput = exports.isWindow = exports.isDocument = exports.isHtmlElement = exports.isBodyElement = exports.isMapElement = exports.isSVGElement = exports.isOptionElement = exports.isCheckboxElement = exports.isColorInputElement = exports.isRadioButtonElement = exports.isSelectElement = exports.isLabelElement = exports.isFormElement = exports.isImgElement = exports.isAnchorElement = exports.isTextAreaElement = exports.isFileInput = exports.isButtonElement = exports.isInputElement = exports.isIframeElement = exports.isRenderedNode = exports.isTextNode = exports.isElementNode = exports.getSelectVisibleChildren = exports.getChildVisibleIndex = exports.getSelectParent = exports.isCrossDomainWindows = exports.getIframeByElement = exports.isElementInIframe = exports.isElementInDocument = exports.findDocument = exports.getActiveElement = void 0;
const hammerhead_1 = __importDefault(require("../deps/hammerhead"));
const arrayUtils = __importStar(require("./array"));
const browserUtils = hammerhead_1.default.utils.browser;
const nativeMethods = hammerhead_1.default.nativeMethods;
// NOTE: We have to retrieve styleUtils.get from hammerhead
// to avoid circular dependencies between domUtils and styleUtils
const getElementStyleProperty = hammerhead_1.default.utils.style.get;
exports.getActiveElement = hammerhead_1.default.utils.dom.getActiveElement;
exports.findDocument = hammerhead_1.default.utils.dom.findDocument;
exports.isElementInDocument = hammerhead_1.default.utils.dom.isElementInDocument;
exports.isElementInIframe = hammerhead_1.default.utils.dom.isElementInIframe;
exports.getIframeByElement = hammerhead_1.default.utils.dom.getIframeByElement;
exports.isCrossDomainWindows = hammerhead_1.default.utils.dom.isCrossDomainWindows;
exports.getSelectParent = hammerhead_1.default.utils.dom.getSelectParent;
exports.getChildVisibleIndex = hammerhead_1.default.utils.dom.getChildVisibleIndex;
exports.getSelectVisibleChildren = hammerhead_1.default.utils.dom.getSelectVisibleChildren;
exports.isElementNode = hammerhead_1.default.utils.dom.isElementNode;
exports.isTextNode = hammerhead_1.default.utils.dom.isTextNode;
exports.isRenderedNode = hammerhead_1.default.utils.dom.isRenderedNode;
exports.isIframeElement = hammerhead_1.default.utils.dom.isIframeElement;
exports.isInputElement = hammerhead_1.default.utils.dom.isInputElement;
exports.isButtonElement = hammerhead_1.default.utils.dom.isButtonElement;
exports.isFileInput = hammerhead_1.default.utils.dom.isFileInput;
exports.isTextAreaElement = hammerhead_1.default.utils.dom.isTextAreaElement;
exports.isAnchorElement = hammerhead_1.default.utils.dom.isAnchorElement;
exports.isImgElement = hammerhead_1.default.utils.dom.isImgElement;
exports.isFormElement = hammerhead_1.default.utils.dom.isFormElement;
exports.isLabelElement = hammerhead_1.default.utils.dom.isLabelElement;
exports.isSelectElement = hammerhead_1.default.utils.dom.isSelectElement;
exports.isRadioButtonElement = hammerhead_1.default.utils.dom.isRadioButtonElement;
exports.isColorInputElement = hammerhead_1.default.utils.dom.isColorInputElement;
exports.isCheckboxElement = hammerhead_1.default.utils.dom.isCheckboxElement;
exports.isOptionElement = hammerhead_1.default.utils.dom.isOptionElement;
exports.isSVGElement = hammerhead_1.default.utils.dom.isSVGElement;
exports.isMapElement = hammerhead_1.default.utils.dom.isMapElement;
exports.isBodyElement = hammerhead_1.default.utils.dom.isBodyElement;
exports.isHtmlElement = hammerhead_1.default.utils.dom.isHtmlElement;
exports.isDocument = hammerhead_1.default.utils.dom.isDocument;
exports.isWindow = hammerhead_1.default.utils.dom.isWindow;
exports.isTextEditableInput = hammerhead_1.default.utils.dom.isTextEditableInput;
exports.isTextEditableElement = hammerhead_1.default.utils.dom.isTextEditableElement;
exports.isTextEditableElementAndEditingAllowed = hammerhead_1.default.utils.dom.isTextEditableElementAndEditingAllowed;
exports.isContentEditableElement = hammerhead_1.default.utils.dom.isContentEditableElement;
exports.isDomElement = hammerhead_1.default.utils.dom.isDomElement;
exports.isShadowUIElement = hammerhead_1.default.utils.dom.isShadowUIElement;
exports.isShadowRoot = hammerhead_1.default.utils.dom.isShadowRoot;
exports.isElementFocusable = hammerhead_1.default.utils.dom.isElementFocusable;
exports.isHammerheadAttr = hammerhead_1.default.utils.dom.isHammerheadAttr;
exports.isElementReadOnly = hammerhead_1.default.utils.dom.isElementReadOnly;
exports.getScrollbarSize = hammerhead_1.default.utils.dom.getScrollbarSize;
exports.getMapContainer = hammerhead_1.default.utils.dom.getMapContainer;
exports.getTagName = hammerhead_1.default.utils.dom.getTagName;
exports.closest = hammerhead_1.default.utils.dom.closest;
exports.getParents = hammerhead_1.default.utils.dom.getParents;
exports.findParent = hammerhead_1.default.utils.dom.findParent;
exports.getTopSameDomainWindow = hammerhead_1.default.utils.dom.getTopSameDomainWindow;
exports.getParentExceptShadowRoot = hammerhead_1.default.utils.dom.getParentExceptShadowRoot;
function canFocus(element, parent, tabIndex) {
    let activeElement = null;
    if (parent.nodeType === Node.DOCUMENT_NODE)
        activeElement = nativeMethods.documentActiveElementGetter.call(parent);
    if (element === activeElement)
        return true;
    if (element.disabled)
        return false;
    if (getElementStyleProperty(element, 'display') === 'none' || getElementStyleProperty(element, 'visibility') === 'hidden')
        return false;
    if ((browserUtils.isIE || browserUtils.isAndroid) && exports.isOptionElement(element))
        return false;
    if (tabIndex !== null && tabIndex < 0)
        return false;
    return true;
}
function wrapElement(el) {
    return {
        el: el,
        skip: el.shadowRoot && el.tabIndex < 0,
        children: {},
    };
}
function buildFocusableTree(parent, sort) {
    const node = wrapElement(parent);
    parent = parent.shadowRoot || parent;
    if (exports.isIframeElement(parent))
        parent = nativeMethods.contentDocumentGetter.call(parent);
    if (parent && (parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE || parent.nodeType === Node.DOCUMENT_NODE)) {
        const elements = filterFocusableElements(parent);
        for (const el of elements) {
            const key = !sort || el.tabIndex <= 0 ? -1 : el.tabIndex;
            node.children[key] = node.children[key] || [];
            node.children[key].push(buildFocusableTree(el, sort));
        }
    }
    return node;
}
function filterFocusableElements(parent) {
    // NOTE: We don't take into account the case of embedded contentEditable
    // elements and specify the contentEditable attribute for focusable elements
    const allElements = parent.querySelectorAll('*');
    const invisibleElements = getInvisibleElements(allElements);
    const inputElementsRegExp = /^(input|button|select|textarea)$/;
    const focusableElements = [];
    let element = null;
    let tagName = null;
    let tabIndex = null;
    let needPush = false;
    for (let i = 0; i < allElements.length; i++) {
        element = allElements[i];
        tagName = exports.getTagName(element);
        tabIndex = getTabIndexAttributeIntValue(element);
        needPush = false;
        if (!canFocus(element, parent, tabIndex))
            continue;
        if (inputElementsRegExp.test(tagName))
            needPush = true;
        else if (element.shadowRoot)
            needPush = true;
        else if (exports.isIframeElement(element))
            needPush = true;
        else if (exports.isAnchorElement(element) && element.hasAttribute('href'))
            needPush = element.getAttribute('href') !== '' || !browserUtils.isIE || tabIndex !== null;
        const contentEditableAttr = element.getAttribute('contenteditable');
        if (contentEditableAttr === '' || contentEditableAttr === 'true')
            needPush = true;
        if (tabIndex !== null)
            needPush = true;
        if (needPush)
            focusableElements.push(element);
    }
    //NOTE: remove children of invisible elements
    return arrayUtils.filter(focusableElements, el => !containsElement(invisibleElements, el));
}
function flattenFocusableTree(node) {
    const result = [];
    if (!node.skip && node.el.nodeType !== Node.DOCUMENT_NODE && !exports.isIframeElement(node.el))
        result.push(node.el);
    for (const prop in node.children) {
        for (const childNode of node.children[prop])
            result.push(...flattenFocusableTree(childNode));
    }
    return result;
}
function getFocusableElements(doc, sort = false) {
    const root = buildFocusableTree(doc, sort);
    return flattenFocusableTree(root);
}
exports.getFocusableElements = getFocusableElements;
function getInvisibleElements(elements) {
    const invisibleElements = [];
    for (let i = 0; i < elements.length; i++) {
        if (getElementStyleProperty(elements[i], 'display') === 'none')
            invisibleElements.push(elements[i]);
    }
    return invisibleElements;
}
function getTabIndexAttributeIntValue(el) {
    let tabIndex = nativeMethods.getAttribute.call(el, 'tabindex');
    if (tabIndex !== null) {
        tabIndex = parseInt(tabIndex, 10);
        tabIndex = isNaN(tabIndex) ? null : tabIndex;
    }
    return tabIndex;
}
exports.getTabIndexAttributeIntValue = getTabIndexAttributeIntValue;
function containsElement(elements, element) {
    if (elements.contains)
        return elements.contains(element);
    return arrayUtils.some(elements, parent => parent.contains(element));
}
exports.containsElement = containsElement;
function getTextareaIndentInLine(textarea, position) {
    const textareaValue = getTextAreaValue(textarea);
    if (!textareaValue)
        return 0;
    const topPart = textareaValue.substring(0, position);
    const linePosition = topPart.lastIndexOf('\n') === -1 ? 0 : topPart.lastIndexOf('\n') + 1;
    return position - linePosition;
}
exports.getTextareaIndentInLine = getTextareaIndentInLine;
function getTextareaLineNumberByPosition(textarea, position) {
    const textareaValue = getTextAreaValue(textarea);
    const lines = textareaValue.split('\n');
    let topPartLength = 0;
    let line = 0;
    for (let i = 0; topPartLength <= position; i++) {
        if (position <= topPartLength + lines[i].length) {
            line = i;
            break;
        }
        topPartLength += lines[i].length + 1;
    }
    return line;
}
exports.getTextareaLineNumberByPosition = getTextareaLineNumberByPosition;
function getTextareaPositionByLineAndOffset(textarea, line, offset) {
    const textareaValue = getTextAreaValue(textarea);
    const lines = textareaValue.split('\n');
    let lineIndex = 0;
    for (let i = 0; i < line; i++)
        lineIndex += lines[i].length + 1;
    return lineIndex + offset;
}
exports.getTextareaPositionByLineAndOffset = getTextareaPositionByLineAndOffset;
// NOTE: the form is also submitted on enter key press if there is only one input of certain
// types (referred to as types that block implicit submission in the HTML5 standard) on the
// form and this input is focused (http://www.w3.org/TR/html5/forms.html#implicit-submission)
function blocksImplicitSubmission(el) {
    let inputTypeRegExp = null;
    if (browserUtils.isSafari)
        inputTypeRegExp = /^(text|password|color|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i;
    else if (browserUtils.isFirefox)
        inputTypeRegExp = /^(text|password|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i;
    else if (browserUtils.isIE)
        inputTypeRegExp = /^(text|password|color|date|time|datetime|datetime-local|email|file|month|number|search|tel|url|week|image)$/i;
    else
        inputTypeRegExp = /^(text|password|datetime|email|number|search|tel|url|image)$/i;
    return inputTypeRegExp.test(el.type);
}
exports.blocksImplicitSubmission = blocksImplicitSubmission;
function isEditableElement(el, checkEditingAllowed) {
    return checkEditingAllowed ?
        exports.isTextEditableElementAndEditingAllowed(el) || exports.isContentEditableElement(el) :
        exports.isTextEditableElement(el) || exports.isContentEditableElement(el);
}
exports.isEditableElement = isEditableElement;
function isElementContainsNode(parentElement, childNode) {
    if (isTheSameNode(childNode, parentElement))
        return true;
    const childNodes = nativeMethods.nodeChildNodesGetter.call(parentElement);
    const length = getChildNodesLength(childNodes);
    for (let i = 0; i < length; i++) {
        const el = childNodes[i];
        if (!exports.isShadowUIElement(el) && isElementContainsNode(el, childNode))
            return true;
    }
    return false;
}
exports.isElementContainsNode = isElementContainsNode;
function isOptionGroupElement(element) {
    return hammerhead_1.default.utils.dom.instanceToString(element) === '[object HTMLOptGroupElement]';
}
exports.isOptionGroupElement = isOptionGroupElement;
function getElementIndexInParent(parent, child) {
    const children = parent.querySelectorAll(exports.getTagName(child));
    return arrayUtils.indexOf(children, child);
}
exports.getElementIndexInParent = getElementIndexInParent;
function isTheSameNode(node1, node2) {
    //NOTE: Mozilla has not isSameNode method
    if (node1 && node2 && node1.isSameNode)
        return node1.isSameNode(node2);
    return node1 === node2;
}
exports.isTheSameNode = isTheSameNode;
function getElementDescription(el) {
    const attributes = {
        id: 'id',
        name: 'name',
        'class': 'className',
    };
    const res = [];
    res.push('<');
    res.push(exports.getTagName(el));
    for (const attr in attributes) {
        if (attributes.hasOwnProperty(attr)) {
            const val = el[attributes[attr]];
            if (val)
                res.push(' ' + attr + '="' + val + '"');
        }
    }
    res.push('>');
    return res.join('');
}
exports.getElementDescription = getElementDescription;
function getFocusableParent(el) {
    const parents = exports.getParents(el);
    for (let i = 0; i < parents.length; i++) {
        if (exports.isElementFocusable(parents[i]))
            return parents[i];
    }
    return null;
}
exports.getFocusableParent = getFocusableParent;
function remove(el) {
    if (el && el.parentElement)
        el.parentElement.removeChild(el);
}
exports.remove = remove;
function isIFrameWindowInDOM(win) {
    //NOTE: In MS Edge, if an iframe is removed from DOM, the browser throws an exception when accessing window.top
    //and window.frameElement. Fortunately, setTimeout is set to undefined in this case.
    if (!win.setTimeout)
        return false;
    let frameElement = null;
    try {
        //NOTE: This may raise a cross-domain policy error in some browsers.
        frameElement = win.frameElement;
    }
    catch (e) {
        return !!win.top;
    }
    // NOTE: in Firefox and WebKit, frameElement is null for cross-domain iframes even if they are in the DOM.
    // But these browsers don't execute scripts in removed iframes, so we suppose that the iframe is in the DOM.
    if ((browserUtils.isFirefox || browserUtils.isWebKit) && win.top !== win && !frameElement)
        return true;
    return !!(frameElement && nativeMethods.contentDocumentGetter.call(frameElement));
}
exports.isIFrameWindowInDOM = isIFrameWindowInDOM;
function isTopWindow(win) {
    try {
        //NOTE: MS Edge throws an exception when trying to access window.top from an iframe removed from DOM
        return win.top === win;
    }
    catch (e) {
        return false;
    }
}
exports.isTopWindow = isTopWindow;
function findIframeByWindow(iframeWindow, iframeDestinationWindow) {
    const iframes = (iframeDestinationWindow || window).document.getElementsByTagName('iframe');
    for (let i = 0; i < iframes.length; i++) {
        if (nativeMethods.contentWindowGetter.call(iframes[i]) === iframeWindow)
            return iframes[i];
    }
    return null;
}
exports.findIframeByWindow = findIframeByWindow;
function isEditableFormElement(element) {
    return exports.isTextEditableElement(element) || exports.isSelectElement(element);
}
exports.isEditableFormElement = isEditableFormElement;
function getCommonAncestor(element1, element2) {
    if (isTheSameNode(element1, element2))
        return element1;
    const el1Parents = [element1].concat(exports.getParents(element1));
    let commonAncestor = element2;
    while (commonAncestor) {
        if (arrayUtils.indexOf(el1Parents, commonAncestor) > -1)
            return commonAncestor;
        commonAncestor = nativeMethods.nodeParentNodeGetter.call(commonAncestor);
    }
    return commonAncestor;
}
exports.getCommonAncestor = getCommonAncestor;
function getChildrenLength(children) {
    return nativeMethods.htmlCollectionLengthGetter.call(children);
}
exports.getChildrenLength = getChildrenLength;
function getChildNodesLength(childNodes) {
    return nativeMethods.nodeListLengthGetter.call(childNodes);
}
exports.getChildNodesLength = getChildNodesLength;
function getInputValue(input) {
    return nativeMethods.inputValueGetter.call(input);
}
exports.getInputValue = getInputValue;
function getTextAreaValue(textArea) {
    return nativeMethods.textAreaValueGetter.call(textArea);
}
exports.getTextAreaValue = getTextAreaValue;
function setInputValue(input, value) {
    return nativeMethods.inputValueSetter.call(input, value);
}
exports.setInputValue = setInputValue;
function setTextAreaValue(textArea, value) {
    return nativeMethods.textAreaValueSetter.call(textArea, value);
}
exports.setTextAreaValue = setTextAreaValue;
function getElementValue(element) {
    if (exports.isInputElement(element))
        return getInputValue(element);
    else if (exports.isTextAreaElement(element))
        return getTextAreaValue(element);
    /*eslint-disable no-restricted-properties*/
    return element.value;
    /*eslint-enable no-restricted-properties*/
}
exports.getElementValue = getElementValue;
function setElementValue(element, value) {
    if (exports.isInputElement(element))
        return setInputValue(element, value);
    else if (exports.isTextAreaElement(element))
        return setTextAreaValue(element, value);
    /*eslint-disable no-restricted-properties*/
    element.value = value;
    /*eslint-enable no-restricted-properties*/
    return value;
}
exports.setElementValue = setElementValue;
function isShadowElement(element) {
    return element && element.getRootNode && exports.findDocument(element) !== element.getRootNode();
}
exports.isShadowElement = isShadowElement;
function contains(element, target) {
    if (!element || !target)
        return false;
    if (element.contains)
        return element.contains(target);
    return !!exports.findParent(target, true, node => node === element);
}
exports.contains = contains;
function isNodeEqual(el1, el2) {
    return el1 === el2;
}
exports.isNodeEqual = isNodeEqual;
function getNodeText(el) {
    return nativeMethods.nodeTextContentGetter.call(el);
}
exports.getNodeText = getNodeText;
function getImgMapName(img) {
    return img.useMap.substring(1);
}
exports.getImgMapName = getImgMapName;
function getDocumentElement(win) {
    return win.document.documentElement;
}
exports.getDocumentElement = getDocumentElement;
function isDocumentElement(el) {
    return el === document.documentElement;
}
exports.isDocumentElement = isDocumentElement;
function isIframeWindow() {
    return false;
}
exports.isIframeWindow = isIframeWindow;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9tLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NsaWVudC9jb3JlL3V0aWxzL2RvbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsb0VBQTRDO0FBQzVDLG9EQUFzQztBQUV0QyxNQUFNLFlBQVksR0FBSSxvQkFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7QUFDL0MsTUFBTSxhQUFhLEdBQUcsb0JBQVUsQ0FBQyxhQUFhLENBQUM7QUFFL0MsMkRBQTJEO0FBQzNELGlFQUFpRTtBQUNqRSxNQUFNLHVCQUF1QixHQUFHLG9CQUFVLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7QUFFOUMsUUFBQSxnQkFBZ0IsR0FBeUIsb0JBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDO0FBQy9FLFFBQUEsWUFBWSxHQUE2QixvQkFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDO0FBQzNFLFFBQUEsbUJBQW1CLEdBQXNCLG9CQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQztBQUNsRixRQUFBLGlCQUFpQixHQUF3QixvQkFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUM7QUFDaEYsUUFBQSxrQkFBa0IsR0FBdUIsb0JBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDO0FBQ2pGLFFBQUEsb0JBQW9CLEdBQXFCLG9CQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztBQUNuRixRQUFBLGVBQWUsR0FBMEIsb0JBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQztBQUM5RSxRQUFBLG9CQUFvQixHQUFxQixvQkFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUM7QUFDbkYsUUFBQSx3QkFB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Q0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLENBQUM7QUFGRCxzQ0FFQztBQUVELFNBQWdCLGtCQUFrQixDQUFFLEdBQUc7SUFDbkMsT0FBTyxHQUFHLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQztBQUN4QyxDQUFDO0FBRkQsZ0RBRUM7QUFFRCxTQUFnQixpQkFBaUIsQ0FBRSxFQUFFO0lBQ2pDLE9BQU8sRUFBRSxLQUFLLFFBQVEsQ0FBQyxlQUFlLENBQUM7QUFDM0MsQ0FBQztBQUZELDhDQUVDO0FBRUQsU0FBZ0IsY0FBYztJQUMxQixPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBRkQsd0NBRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaGFtbWVyaGVhZCBmcm9tICcuLi9kZXBzL2hhbW1lcmhlYWQnO1xuaW1wb3J0ICogYXMgYXJyYXlVdGlscyBmcm9tICcuL2FycmF5JztcblxuY29uc3QgYnJvd3NlclV0aWxzICA9IGhhbW1lcmhlYWQudXRpbHMuYnJvd3NlcjtcbmNvbnN0IG5hdGl2ZU1ldGhvZHMgPSBoYW1tZXJoZWFkLm5hdGl2ZU1ldGhvZHM7XG5cbi8vIE5PVEU6IFdlIGhhdmUgdG8gcmV0cmlldmUgc3R5bGVVdGlscy5nZXQgZnJvbSBoYW1tZXJoZWFkXG4vLyB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBkb21VdGlscyBhbmQgc3R5bGVVdGlsc1xuY29uc3QgZ2V0RWxlbWVudFN0eWxlUHJvcGVydHkgPSBoYW1tZXJoZWFkLnV0aWxzLnN0eWxlLmdldDtcblxuZXhwb3J0IGNvbnN0IGdldEFjdGl2ZUVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0QWN0aXZlRWxlbWVudDtcbmV4cG9ydCBjb25zdCBmaW5kRG9jdW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmZpbmREb2N1bWVudDtcbmV4cG9ydCBjb25zdCBpc0VsZW1lbnRJbkRvY3VtZW50ICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzRWxlbWVudEluRG9jdW1lbnQ7XG5leHBvcnQgY29uc3QgaXNFbGVtZW50SW5JZnJhbWUgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0VsZW1lbnRJbklmcmFtZTtcbmV4cG9ydCBjb25zdCBnZXRJZnJhbWVCeUVsZW1lbnQgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmdldElmcmFtZUJ5RWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0Nyb3NzRG9tYWluV2luZG93cyAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzQ3Jvc3NEb21haW5XaW5kb3dzO1xuZXhwb3J0IGNvbnN0IGdldFNlbGVjdFBhcmVudCAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0U2VsZWN0UGFyZW50O1xuZXhwb3J0IGNvbnN0IGdldENoaWxkVmlzaWJsZUluZGV4ICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0Q2hpbGRWaXNpYmxlSW5kZXg7XG5leHBvcnQgY29uc3QgZ2V0U2VsZWN0VmlzaWJsZUNoaWxkcmVuICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5nZXRTZWxlY3RWaXNpYmxlQ2hpbGRyZW47XG5leHBvcnQgY29uc3QgaXNFbGVtZW50Tm9kZSAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0VsZW1lbnROb2RlO1xuZXhwb3J0IGNvbnN0IGlzVGV4dE5vZGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNUZXh0Tm9kZTtcbmV4cG9ydCBjb25zdCBpc1JlbmRlcmVkTm9kZSAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzUmVuZGVyZWROb2RlO1xuZXhwb3J0IGNvbnN0IGlzSWZyYW1lRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNJZnJhbWVFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzSW5wdXRFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNJbnB1dEVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNCdXR0b25FbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0J1dHRvbkVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNGaWxlSW5wdXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0ZpbGVJbnB1dDtcbmV4cG9ydCBjb25zdCBpc1RleHRBcmVhRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzVGV4dEFyZWFFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzQW5jaG9yRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNBbmNob3JFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzSW1nRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNJbWdFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzRm9ybUVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNGb3JtRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0xhYmVsRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzTGFiZWxFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzU2VsZWN0RWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNTZWxlY3RFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzUmFkaW9CdXR0b25FbGVtZW50ICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNSYWRpb0J1dHRvbkVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNDb2xvcklucHV0RWxlbWVudCAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0NvbG9ySW5wdXRFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzQ2hlY2tib3hFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNDaGVja2JveEVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNPcHRpb25FbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc09wdGlvbkVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNTVkdFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1NWR0VsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNNYXBFbGVtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc01hcEVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNCb2R5RWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc0JvZHlFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzSHRtbEVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNIdG1sRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0RvY3VtZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzRG9jdW1lbnQ7XG5leHBvcnQgY29uc3QgaXNXaW5kb3cgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1dpbmRvdztcbmV4cG9ydCBjb25zdCBpc1RleHRFZGl0YWJsZUlucHV0ICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzVGV4dEVkaXRhYmxlSW5wdXQ7XG5leHBvcnQgY29uc3QgaXNUZXh0RWRpdGFibGVFbGVtZW50ICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1RleHRFZGl0YWJsZUVsZW1lbnQ7XG5leHBvcnQgY29uc3QgaXNUZXh0RWRpdGFibGVFbGVtZW50QW5kRWRpdGluZ0FsbG93ZWQgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pc1RleHRFZGl0YWJsZUVsZW1lbnRBbmRFZGl0aW5nQWxsb3dlZDtcbmV4cG9ydCBjb25zdCBpc0NvbnRlbnRFZGl0YWJsZUVsZW1lbnQgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzQ29udGVudEVkaXRhYmxlRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc0RvbUVsZW1lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzRG9tRWxlbWVudDtcbmV4cG9ydCBjb25zdCBpc1NoYWRvd1VJRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzU2hhZG93VUlFbGVtZW50O1xuZXhwb3J0IGNvbnN0IGlzU2hhZG93Um9vdCAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNTaGFkb3dSb290O1xuZXhwb3J0IGNvbnN0IGlzRWxlbWVudEZvY3VzYWJsZSAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNFbGVtZW50Rm9jdXNhYmxlO1xuZXhwb3J0IGNvbnN0IGlzSGFtbWVyaGVhZEF0dHIgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uaXNIYW1tZXJoZWFkQXR0cjtcbmV4cG9ydCBjb25zdCBpc0VsZW1lbnRSZWFkT25seSAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmlzRWxlbWVudFJlYWRPbmx5O1xuZXhwb3J0IGNvbnN0IGdldFNjcm9sbGJhclNpemUgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0U2Nyb2xsYmFyU2l6ZTtcbmV4cG9ydCBjb25zdCBnZXRNYXBDb250YWluZXIgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmdldE1hcENvbnRhaW5lcjtcbmV4cG9ydCBjb25zdCBnZXRUYWdOYW1lICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmdldFRhZ05hbWU7XG5leHBvcnQgY29uc3QgY2xvc2VzdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5jbG9zZXN0O1xuZXhwb3J0IGNvbnN0IGdldFBhcmVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0UGFyZW50cztcbmV4cG9ydCBjb25zdCBmaW5kUGFyZW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IGhhbW1lcmhlYWQudXRpbHMuZG9tLmZpbmRQYXJlbnQ7XG5leHBvcnQgY29uc3QgZ2V0VG9wU2FtZURvbWFpbldpbmRvdyAgICAgICAgICAgICAgICAgPSBoYW1tZXJoZWFkLnV0aWxzLmRvbS5nZXRUb3BTYW1lRG9tYWluV2luZG93O1xuZXhwb3J0IGNvbnN0IGdldFBhcmVudEV4Y2VwdFNoYWRvd1Jvb3QgICAgICAgICAgICAgID0gaGFtbWVyaGVhZC51dGlscy5kb20uZ2V0UGFyZW50RXhjZXB0U2hhZG93Um9vdDtcblxuZnVuY3Rpb24gY2FuRm9jdXMgKGVsZW1lbnQsIHBhcmVudCwgdGFiSW5kZXgpIHtcbiAgICBsZXQgYWN0aXZlRWxlbWVudCA9IG51bGw7XG5cbiAgICBpZiAocGFyZW50Lm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREUpXG4gICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBuYXRpdmVNZXRob2RzLmRvY3VtZW50QWN0aXZlRWxlbWVudEdldHRlci5jYWxsKHBhcmVudCk7XG5cbiAgICBpZiAoZWxlbWVudCA9PT0gYWN0aXZlRWxlbWVudClcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAoZWxlbWVudC5kaXNhYmxlZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGdldEVsZW1lbnRTdHlsZVByb3BlcnR5KGVsZW1lbnQsICdkaXNwbGF5JykgPT09ICdub25lJyB8fCBnZXRFbGVtZW50U3R5bGVQcm9wZXJ0eShlbGVtZW50LCAndmlzaWJpbGl0eScpID09PSAnaGlkZGVuJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKChicm93c2VyVXRpbHMuaXNJRSB8fCBicm93c2VyVXRpbHMuaXNBbmRyb2lkKSAmJiBpc09wdGlvbkVsZW1lbnQoZWxlbWVudCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmICh0YWJJbmRleCAhPT0gbnVsbCAmJiB0YWJJbmRleCA8IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiB3cmFwRWxlbWVudCAoZWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBlbDogICAgICAgZWwsXG4gICAgICAgIHNraXA6ICAgICBlbC5zaGFkb3dSb290ICYmIGVsLnRhYkluZGV4IDwgMCxcbiAgICAgICAgY2hpbGRyZW46IHt9LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkRm9jdXNhYmxlVHJlZSAocGFyZW50LCBzb3J0KSB7XG4gICAgY29uc3Qgbm9kZSA9IHdyYXBFbGVtZW50KHBhcmVudCk7XG5cbiAgICBwYXJlbnQgPSBwYXJlbnQuc2hhZG93Um9vdCB8fCBwYXJlbnQ7XG5cbiAgICBpZiAoaXNJZnJhbWVFbGVtZW50KHBhcmVudCkpXG4gICAgICAgIHBhcmVudCA9IG5hdGl2ZU1ldGhvZHMuY29udGVudERvY3VtZW50R2V0dGVyLmNhbGwocGFyZW50KTtcblxuICAgIGlmIChwYXJlbnQgJiYgKHBhcmVudC5ub2RlVHlwZSA9PT0gTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFIHx8IHBhcmVudC5ub2RlVHlwZSA9PT0gTm9kZS5ET0NVTUVOVF9OT0RFKSkge1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IGZpbHRlckZvY3VzYWJsZUVsZW1lbnRzKHBhcmVudCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBlbCBvZiBlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gIXNvcnQgfHwgZWwudGFiSW5kZXggPD0gMCA/IC0xIDogZWwudGFiSW5kZXg7XG5cbiAgICAgICAgICAgIG5vZGUuY2hpbGRyZW5ba2V5XSA9IG5vZGUuY2hpbGRyZW5ba2V5XSB8fCBbXTtcblxuICAgICAgICAgICAgbm9kZS5jaGlsZHJlbltrZXldLnB1c2goYnVpbGRGb2N1c2FibGVUcmVlKGVsLCBzb3J0KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyRm9jdXNhYmxlRWxlbWVudHMgKHBhcmVudCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHRha2UgaW50byBhY2NvdW50IHRoZSBjYXNlIG9mIGVtYmVkZGVkIGNvbnRlbnRFZGl0YWJsZVxuICAgIC8vIGVsZW1lbnRzIGFuZCBzcGVjaWZ5IHRoZSBjb250ZW50RWRpdGFibGUgYXR0cmlidXRlIGZvciBmb2N1c2FibGUgZWxlbWVudHNcbiAgICBjb25zdCBhbGxFbGVtZW50cyAgICAgICAgICAgPSBwYXJlbnQucXVlcnlTZWxlY3RvckFsbCgnKicpO1xuICAgIGNvbnN0IGludmlzaWJsZUVsZW1lbnRzICAgICA9IGdldEludmlzaWJsZUVsZW1lbnRzKGFsbEVsZW1lbnRzKTtcbiAgICBjb25zdCBpbnB1dEVsZW1lbnRzUmVnRXhwICAgPSAvXihpbnB1dHxidXR0b258c2VsZWN0fHRleHRhcmVhKSQvO1xuICAgIGNvbnN0IGZvY3VzYWJsZUVsZW1lbnRzICAgICA9IFtdO1xuXG4gICAgbGV0IGVsZW1lbnQgID0gbnVsbDtcbiAgICBsZXQgdGFnTmFtZSAgPSBudWxsO1xuICAgIGxldCB0YWJJbmRleCA9IG51bGw7XG5cbiAgICBsZXQgbmVlZFB1c2ggPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWxlbWVudCAgPSBhbGxFbGVtZW50c1tpXTtcbiAgICAgICAgdGFnTmFtZSAgPSBnZXRUYWdOYW1lKGVsZW1lbnQpO1xuICAgICAgICB0YWJJbmRleCA9IGdldFRhYkluZGV4QXR0cmlidXRlSW50VmFsdWUoZWxlbWVudCk7XG4gICAgICAgIG5lZWRQdXNoID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFjYW5Gb2N1cyhlbGVtZW50LCBwYXJlbnQsIHRhYkluZGV4KSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChpbnB1dEVsZW1lbnRzUmVnRXhwLnRlc3QodGFnTmFtZSkpXG4gICAgICAgICAgICBuZWVkUHVzaCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGVsZW1lbnQuc2hhZG93Um9vdClcbiAgICAgICAgICAgIG5lZWRQdXNoID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNJZnJhbWVFbGVtZW50KGVsZW1lbnQpKVxuICAgICAgICAgICAgbmVlZFB1c2ggPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0FuY2hvckVsZW1lbnQoZWxlbWVudCkgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2hyZWYnKSlcbiAgICAgICAgICAgIG5lZWRQdXNoID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSAhPT0gJycgfHwgIWJyb3dzZXJVdGlscy5pc0lFIHx8IHRhYkluZGV4ICE9PSBudWxsO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFZGl0YWJsZUF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJyk7XG5cbiAgICAgICAgaWYgKGNvbnRlbnRFZGl0YWJsZUF0dHIgPT09ICcnIHx8IGNvbnRlbnRFZGl0YWJsZUF0dHIgPT09ICd0cnVlJylcbiAgICAgICAgICAgIG5lZWRQdXNoID0gdHJ1ZTtcblxuICAgICAgICBpZiAodGFiSW5kZXggIT09IG51bGwpXG4gICAgICAgICAgICBuZWVkUHVzaCA9IHRydWU7XG5cbiAgICAgICAgaWYgKG5lZWRQdXNoKVxuICAgICAgICAgICAgZm9jdXNhYmxlRWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICB9XG5cbiAgICAvL05PVEU6IHJlbW92ZSBjaGlsZHJlbiBvZiBpbnZpc2libGUgZWxlbWVudHNcbiAgICByZXR1cm4gYXJyYXlVdGlscy5maWx0ZXIoZm9jdXNhYmxlRWxlbWVudHMsIGVsID0+ICFjb250YWluc0VsZW1lbnQoaW52aXNpYmxlRWxlbWVudHMsIGVsKSk7XG59XG5cbmZ1bmN0aW9uIGZsYXR0ZW5Gb2N1c2FibGVUcmVlIChub2RlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgICBpZiAoIW5vZGUuc2tpcCAmJiBub2RlLmVsLm5vZGVUeXBlICE9PSBOb2RlLkRPQ1VNRU5UX05PREUgJiYgIWlzSWZyYW1lRWxlbWVudChub2RlLmVsKSlcbiAgICAgICAgcmVzdWx0LnB1c2gobm9kZS5lbCk7XG5cbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gbm9kZS5jaGlsZHJlbikge1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkTm9kZSBvZiBub2RlLmNoaWxkcmVuW3Byb3BdKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goLi4uZmxhdHRlbkZvY3VzYWJsZVRyZWUoY2hpbGROb2RlKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9jdXNhYmxlRWxlbWVudHMgKGRvYywgc29ydCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgcm9vdCA9IGJ1aWxkRm9jdXNhYmxlVHJlZShkb2MsIHNvcnQpO1xuXG4gICAgcmV0dXJuIGZsYXR0ZW5Gb2N1c2FibGVUcmVlKHJvb3QpO1xufVxuXG5mdW5jdGlvbiBnZXRJbnZpc2libGVFbGVtZW50cyAoZWxlbWVudHMpIHtcbiAgICBjb25zdCBpbnZpc2libGVFbGVtZW50cyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZ2V0RWxlbWVudFN0eWxlUHJvcGVydHkoZWxlbWVudHNbaV0sICdkaXNwbGF5JykgPT09ICdub25lJylcbiAgICAgICAgICAgIGludmlzaWJsZUVsZW1lbnRzLnB1c2goZWxlbWVudHNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBpbnZpc2libGVFbGVtZW50cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhYkluZGV4QXR0cmlidXRlSW50VmFsdWUgKGVsKSB7XG4gICAgbGV0IHRhYkluZGV4ID0gbmF0aXZlTWV0aG9kcy5nZXRBdHRyaWJ1dGUuY2FsbChlbCwgJ3RhYmluZGV4Jyk7XG5cbiAgICBpZiAodGFiSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgdGFiSW5kZXggPSBwYXJzZUludCh0YWJJbmRleCwgMTApO1xuICAgICAgICB0YWJJbmRleCA9IGlzTmFOKHRhYkluZGV4KSA/IG51bGwgOiB0YWJJbmRleDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGFiSW5kZXg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0VsZW1lbnQgKGVsZW1lbnRzLCBlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnRzLmNvbnRhaW5zKVxuICAgICAgICByZXR1cm4gZWxlbWVudHMuY29udGFpbnMoZWxlbWVudCk7XG5cbiAgICByZXR1cm4gYXJyYXlVdGlscy5zb21lKGVsZW1lbnRzLCBwYXJlbnQgPT4gcGFyZW50LmNvbnRhaW5zKGVsZW1lbnQpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHRhcmVhSW5kZW50SW5MaW5lICh0ZXh0YXJlYSwgcG9zaXRpb24pIHtcbiAgICBjb25zdCB0ZXh0YXJlYVZhbHVlID0gZ2V0VGV4dEFyZWFWYWx1ZSh0ZXh0YXJlYSk7XG5cbiAgICBpZiAoIXRleHRhcmVhVmFsdWUpXG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgY29uc3QgdG9wUGFydCAgICAgID0gdGV4dGFyZWFWYWx1ZS5zdWJzdHJpbmcoMCwgcG9zaXRpb24pO1xuICAgIGNvbnN0IGxpbmVQb3NpdGlvbiA9IHRvcFBhcnQubGFzdEluZGV4T2YoJ1xcbicpID09PSAtMSA/IDAgOiB0b3BQYXJ0Lmxhc3RJbmRleE9mKCdcXG4nKSArIDE7XG5cbiAgICByZXR1cm4gcG9zaXRpb24gLSBsaW5lUG9zaXRpb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0YXJlYUxpbmVOdW1iZXJCeVBvc2l0aW9uICh0ZXh0YXJlYSwgcG9zaXRpb24pIHtcbiAgICBjb25zdCB0ZXh0YXJlYVZhbHVlID0gZ2V0VGV4dEFyZWFWYWx1ZSh0ZXh0YXJlYSk7XG4gICAgY29uc3QgbGluZXMgICAgICAgICA9IHRleHRhcmVhVmFsdWUuc3BsaXQoJ1xcbicpO1xuICAgIGxldCB0b3BQYXJ0TGVuZ3RoICAgPSAwO1xuICAgIGxldCBsaW5lICAgICAgICAgICAgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IHRvcFBhcnRMZW5ndGggPD0gcG9zaXRpb247IGkrKykge1xuICAgICAgICBpZiAocG9zaXRpb24gPD0gdG9wUGFydExlbmd0aCArIGxpbmVzW2ldLmxlbmd0aCkge1xuICAgICAgICAgICAgbGluZSA9IGk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9wUGFydExlbmd0aCArPSBsaW5lc1tpXS5sZW5ndGggKyAxO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dGFyZWFQb3NpdGlvbkJ5TGluZUFuZE9mZnNldCAodGV4dGFyZWEsIGxpbmUsIG9mZnNldCkge1xuICAgIGNvbnN0IHRleHRhcmVhVmFsdWUgPSBnZXRUZXh0QXJlYVZhbHVlKHRleHRhcmVhKTtcbiAgICBjb25zdCBsaW5lcyAgICAgICAgID0gdGV4dGFyZWFWYWx1ZS5zcGxpdCgnXFxuJyk7XG4gICAgbGV0IGxpbmVJbmRleCAgICAgICA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmU7IGkrKylcbiAgICAgICAgbGluZUluZGV4ICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7XG5cbiAgICByZXR1cm4gbGluZUluZGV4ICsgb2Zmc2V0O1xufVxuXG4vLyBOT1RFOiB0aGUgZm9ybSBpcyBhbHNvIHN1Ym1pdHRlZCBvbiBlbnRlciBrZXkgcHJlc3MgaWYgdGhlcmUgaXMgb25seSBvbmUgaW5wdXQgb2YgY2VydGFpblxuLy8gdHlwZXMgKHJlZmVycmVkIHRvIGFzIHR5cGVzIHRoYXQgYmxvY2sgaW1wbGljaXQgc3VibWlzc2lvbiBpbiB0aGUgSFRNTDUgc3RhbmRhcmQpIG9uIHRoZVxuLy8gZm9ybSBhbmQgdGhpcyBpbnB1dCBpcyBmb2N1c2VkIChodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI2ltcGxpY2l0LXN1Ym1pc3Npb24pXG5leHBvcnQgZnVuY3Rpb24gYmxvY2tzSW1wbGljaXRTdWJtaXNzaW9uIChlbCkge1xuICAgIGxldCBpbnB1dFR5cGVSZWdFeHAgPSBudWxsO1xuXG4gICAgaWYgKGJyb3dzZXJVdGlscy5pc1NhZmFyaSlcbiAgICAgICAgaW5wdXRUeXBlUmVnRXhwID0gL14odGV4dHxwYXNzd29yZHxjb2xvcnxkYXRlfHRpbWV8ZGF0ZXRpbWV8ZGF0ZXRpbWUtbG9jYWx8ZW1haWx8bW9udGh8bnVtYmVyfHNlYXJjaHx0ZWx8dXJsfHdlZWt8aW1hZ2UpJC9pO1xuICAgIGVsc2UgaWYgKGJyb3dzZXJVdGlscy5pc0ZpcmVmb3gpXG4gICAgICAgIGlucHV0VHlwZVJlZ0V4cCA9IC9eKHRleHR8cGFzc3dvcmR8ZGF0ZXx0aW1lfGRhdGV0aW1lfGRhdGV0aW1lLWxvY2FsfGVtYWlsfG1vbnRofG51bWJlcnxzZWFyY2h8dGVsfHVybHx3ZWVrfGltYWdlKSQvaTtcbiAgICBlbHNlIGlmIChicm93c2VyVXRpbHMuaXNJRSlcbiAgICAgICAgaW5wdXRUeXBlUmVnRXhwID0gL14odGV4dHxwYXNzd29yZHxjb2xvcnxkYXRlfHRpbWV8ZGF0ZXRpbWV8ZGF0ZXRpbWUtbG9jYWx8ZW1haWx8ZmlsZXxtb250aHxudW1iZXJ8c2VhcmNofHRlbHx1cmx8d2Vla3xpbWFnZSkkL2k7XG4gICAgZWxzZVxuICAgICAgICBpbnB1dFR5cGVSZWdFeHAgPSAvXih0ZXh0fHBhc3N3b3JkfGRhdGV0aW1lfGVtYWlsfG51bWJlcnxzZWFyY2h8dGVsfHVybHxpbWFnZSkkL2k7XG5cbiAgICByZXR1cm4gaW5wdXRUeXBlUmVnRXhwLnRlc3QoZWwudHlwZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VkaXRhYmxlRWxlbWVudCAoZWwsIGNoZWNrRWRpdGluZ0FsbG93ZWQpIHtcbiAgICByZXR1cm4gY2hlY2tFZGl0aW5nQWxsb3dlZCA/XG4gICAgICAgIGlzVGV4dEVkaXRhYmxlRWxlbWVudEFuZEVkaXRpbmdBbGxvd2VkKGVsKSB8fCBpc0NvbnRlbnRFZGl0YWJsZUVsZW1lbnQoZWwpIDpcbiAgICAgICAgaXNUZXh0RWRpdGFibGVFbGVtZW50KGVsKSB8fCBpc0NvbnRlbnRFZGl0YWJsZUVsZW1lbnQoZWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50Q29udGFpbnNOb2RlIChwYXJlbnRFbGVtZW50LCBjaGlsZE5vZGUpIHtcbiAgICBpZiAoaXNUaGVTYW1lTm9kZShjaGlsZE5vZGUsIHBhcmVudEVsZW1lbnQpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IGNoaWxkTm9kZXMgPSBuYXRpdmVNZXRob2RzLm5vZGVDaGlsZE5vZGVzR2V0dGVyLmNhbGwocGFyZW50RWxlbWVudCk7XG4gICAgY29uc3QgbGVuZ3RoICAgICA9IGdldENoaWxkTm9kZXNMZW5ndGgoY2hpbGROb2Rlcyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVsID0gY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICBpZiAoIWlzU2hhZG93VUlFbGVtZW50KGVsKSAmJiBpc0VsZW1lbnRDb250YWluc05vZGUoZWwsIGNoaWxkTm9kZSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09wdGlvbkdyb3VwRWxlbWVudCAoZWxlbWVudCkge1xuICAgIHJldHVybiBoYW1tZXJoZWFkLnV0aWxzLmRvbS5pbnN0YW5jZVRvU3RyaW5nKGVsZW1lbnQpID09PSAnW29iamVjdCBIVE1MT3B0R3JvdXBFbGVtZW50XSc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50SW5kZXhJblBhcmVudCAocGFyZW50LCBjaGlsZCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZ2V0VGFnTmFtZShjaGlsZCkpO1xuXG4gICAgcmV0dXJuIGFycmF5VXRpbHMuaW5kZXhPZihjaGlsZHJlbiwgY2hpbGQpO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RoZVNhbWVOb2RlIChub2RlMSwgbm9kZTIpIHtcbiAgICAvL05PVEU6IE1vemlsbGEgaGFzIG5vdCBpc1NhbWVOb2RlIG1ldGhvZFxuICAgIGlmIChub2RlMSAmJiBub2RlMiAmJiBub2RlMS5pc1NhbWVOb2RlKVxuICAgICAgICByZXR1cm4gbm9kZTEuaXNTYW1lTm9kZShub2RlMik7XG5cbiAgICByZXR1cm4gbm9kZTEgPT09IG5vZGUyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudERlc2NyaXB0aW9uIChlbCkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgICAgIGlkOiAgICAgICdpZCcsXG4gICAgICAgIG5hbWU6ICAgICduYW1lJyxcbiAgICAgICAgJ2NsYXNzJzogJ2NsYXNzTmFtZScsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlcyA9IFtdO1xuXG4gICAgcmVzLnB1c2goJzwnKTtcbiAgICByZXMucHVzaChnZXRUYWdOYW1lKGVsKSk7XG5cbiAgICBmb3IgKGNvbnN0IGF0dHIgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBpZiAoYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyKSkge1xuICAgICAgICAgICAgY29uc3QgdmFsID0gZWxbYXR0cmlidXRlc1thdHRyXV07XG5cbiAgICAgICAgICAgIGlmICh2YWwpXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goJyAnICsgYXR0ciArICc9XCInICsgdmFsICsgJ1wiJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXMucHVzaCgnPicpO1xuXG4gICAgcmV0dXJuIHJlcy5qb2luKCcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvY3VzYWJsZVBhcmVudCAoZWwpIHtcbiAgICBjb25zdCBwYXJlbnRzID0gZ2V0UGFyZW50cyhlbCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRWxlbWVudEZvY3VzYWJsZShwYXJlbnRzW2ldKSlcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlIChlbCkge1xuICAgIGlmIChlbCAmJiBlbC5wYXJlbnRFbGVtZW50KVxuICAgICAgICBlbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSUZyYW1lV2luZG93SW5ET00gKHdpbikge1xuICAgIC8vTk9URTogSW4gTVMgRWRnZSwgaWYgYW4gaWZyYW1lIGlzIHJlbW92ZWQgZnJvbSBET00sIHRoZSBicm93c2VyIHRocm93cyBhbiBleGNlcHRpb24gd2hlbiBhY2Nlc3Npbmcgd2luZG93LnRvcFxuICAgIC8vYW5kIHdpbmRvdy5mcmFtZUVsZW1lbnQuIEZvcnR1bmF0ZWx5LCBzZXRUaW1lb3V0IGlzIHNldCB0byB1bmRlZmluZWQgaW4gdGhpcyBjYXNlLlxuICAgIGlmICghd2luLnNldFRpbWVvdXQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGxldCBmcmFtZUVsZW1lbnQgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgLy9OT1RFOiBUaGlzIG1heSByYWlzZSBhIGNyb3NzLWRvbWFpbiBwb2xpY3kgZXJyb3IgaW4gc29tZSBicm93c2Vycy5cbiAgICAgICAgZnJhbWVFbGVtZW50ID0gd2luLmZyYW1lRWxlbWVudDtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuICEhd2luLnRvcDtcbiAgICB9XG5cbiAgICAvLyBOT1RFOiBpbiBGaXJlZm94IGFuZCBXZWJLaXQsIGZyYW1lRWxlbWVudCBpcyBudWxsIGZvciBjcm9zcy1kb21haW4gaWZyYW1lcyBldmVuIGlmIHRoZXkgYXJlIGluIHRoZSBET00uXG4gICAgLy8gQnV0IHRoZXNlIGJyb3dzZXJzIGRvbid0IGV4ZWN1dGUgc2NyaXB0cyBpbiByZW1vdmVkIGlmcmFtZXMsIHNvIHdlIHN1cHBvc2UgdGhhdCB0aGUgaWZyYW1lIGlzIGluIHRoZSBET00uXG4gICAgaWYgKChicm93c2VyVXRpbHMuaXNGaXJlZm94IHx8IGJyb3dzZXJVdGlscy5pc1dlYktpdCkgJiYgd2luLnRvcCAhPT0gd2luICYmICFmcmFtZUVsZW1lbnQpXG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuICEhKGZyYW1lRWxlbWVudCAmJiBuYXRpdmVNZXRob2RzLmNvbnRlbnREb2N1bWVudEdldHRlci5jYWxsKGZyYW1lRWxlbWVudCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUb3BXaW5kb3cgKHdpbikge1xuICAgIHRyeSB7XG4gICAgICAgIC8vTk9URTogTVMgRWRnZSB0aHJvd3MgYW4gZXhjZXB0aW9uIHdoZW4gdHJ5aW5nIHRvIGFjY2VzcyB3aW5kb3cudG9wIGZyb20gYW4gaWZyYW1lIHJlbW92ZWQgZnJvbSBET01cbiAgICAgICAgcmV0dXJuIHdpbi50b3AgPT09IHdpbjtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJZnJhbWVCeVdpbmRvdyAoaWZyYW1lV2luZG93LCBpZnJhbWVEZXN0aW5hdGlvbldpbmRvdykge1xuICAgIGNvbnN0IGlmcmFtZXMgPSAoaWZyYW1lRGVzdGluYXRpb25XaW5kb3cgfHwgd2luZG93KS5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaWZyYW1lJyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlmcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKG5hdGl2ZU1ldGhvZHMuY29udGVudFdpbmRvd0dldHRlci5jYWxsKGlmcmFtZXNbaV0pID09PSBpZnJhbWVXaW5kb3cpXG4gICAgICAgICAgICByZXR1cm4gaWZyYW1lc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRWRpdGFibGVGb3JtRWxlbWVudCAoZWxlbWVudCkge1xuICAgIHJldHVybiBpc1RleHRFZGl0YWJsZUVsZW1lbnQoZWxlbWVudCkgfHwgaXNTZWxlY3RFbGVtZW50KGVsZW1lbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tbW9uQW5jZXN0b3IgKGVsZW1lbnQxLCBlbGVtZW50Mikge1xuICAgIGlmIChpc1RoZVNhbWVOb2RlKGVsZW1lbnQxLCBlbGVtZW50MikpXG4gICAgICAgIHJldHVybiBlbGVtZW50MTtcblxuICAgIGNvbnN0IGVsMVBhcmVudHMgICA9IFtlbGVtZW50MV0uY29uY2F0KGdldFBhcmVudHMoZWxlbWVudDEpKTtcbiAgICBsZXQgY29tbW9uQW5jZXN0b3IgPSBlbGVtZW50MjtcblxuICAgIHdoaWxlIChjb21tb25BbmNlc3Rvcikge1xuICAgICAgICBpZiAoYXJyYXlVdGlscy5pbmRleE9mKGVsMVBhcmVudHMsIGNvbW1vbkFuY2VzdG9yKSA+IC0xKVxuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbkFuY2VzdG9yO1xuXG4gICAgICAgIGNvbW1vbkFuY2VzdG9yID0gbmF0aXZlTWV0aG9kcy5ub2RlUGFyZW50Tm9kZUdldHRlci5jYWxsKGNvbW1vbkFuY2VzdG9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tbW9uQW5jZXN0b3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGlsZHJlbkxlbmd0aCAoY2hpbGRyZW4pIHtcbiAgICByZXR1cm4gbmF0aXZlTWV0aG9kcy5odG1sQ29sbGVjdGlvbkxlbmd0aEdldHRlci5jYWxsKGNoaWxkcmVuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENoaWxkTm9kZXNMZW5ndGggKGNoaWxkTm9kZXMpIHtcbiAgICByZXR1cm4gbmF0aXZlTWV0aG9kcy5ub2RlTGlzdExlbmd0aEdldHRlci5jYWxsKGNoaWxkTm9kZXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5wdXRWYWx1ZSAoaW5wdXQpIHtcbiAgICByZXR1cm4gbmF0aXZlTWV0aG9kcy5pbnB1dFZhbHVlR2V0dGVyLmNhbGwoaW5wdXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dEFyZWFWYWx1ZSAodGV4dEFyZWEpIHtcbiAgICByZXR1cm4gbmF0aXZlTWV0aG9kcy50ZXh0QXJlYVZhbHVlR2V0dGVyLmNhbGwodGV4dEFyZWEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SW5wdXRWYWx1ZSAoaW5wdXQsIHZhbHVlKSB7XG4gICAgcmV0dXJuIG5hdGl2ZU1ldGhvZHMuaW5wdXRWYWx1ZVNldHRlci5jYWxsKGlucHV0LCB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRUZXh0QXJlYVZhbHVlICh0ZXh0QXJlYSwgdmFsdWUpIHtcbiAgICByZXR1cm4gbmF0aXZlTWV0aG9kcy50ZXh0QXJlYVZhbHVlU2V0dGVyLmNhbGwodGV4dEFyZWEsIHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRWYWx1ZSAoZWxlbWVudCkge1xuICAgIGlmIChpc0lucHV0RWxlbWVudChlbGVtZW50KSlcbiAgICAgICAgcmV0dXJuIGdldElucHV0VmFsdWUoZWxlbWVudCk7XG4gICAgZWxzZSBpZiAoaXNUZXh0QXJlYUVsZW1lbnQoZWxlbWVudCkpXG4gICAgICAgIHJldHVybiBnZXRUZXh0QXJlYVZhbHVlKGVsZW1lbnQpO1xuXG4gICAgLyplc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLXByb3BlcnRpZXMqL1xuICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgIC8qZXNsaW50LWVuYWJsZSBuby1yZXN0cmljdGVkLXByb3BlcnRpZXMqL1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RWxlbWVudFZhbHVlIChlbGVtZW50LCB2YWx1ZSkge1xuICAgIGlmIChpc0lucHV0RWxlbWVudChlbGVtZW50KSlcbiAgICAgICAgcmV0dXJuIHNldElucHV0VmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICAgIGVsc2UgaWYgKGlzVGV4dEFyZWFFbGVtZW50KGVsZW1lbnQpKVxuICAgICAgICByZXR1cm4gc2V0VGV4dEFyZWFWYWx1ZShlbGVtZW50LCB2YWx1ZSk7XG5cbiAgICAvKmVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtcHJvcGVydGllcyovXG4gICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgIC8qZXNsaW50LWVuYWJsZSBuby1yZXN0cmljdGVkLXByb3BlcnRpZXMqL1xuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTaGFkb3dFbGVtZW50IChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRSb290Tm9kZSAmJiBmaW5kRG9jdW1lbnQoZWxlbWVudCkgIT09IGVsZW1lbnQuZ2V0Um9vdE5vZGUoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zIChlbGVtZW50LCB0YXJnZXQpIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIXRhcmdldClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGVsZW1lbnQuY29udGFpbnMpXG4gICAgICAgIHJldHVybiBlbGVtZW50LmNvbnRhaW5zKHRhcmdldCk7XG5cbiAgICByZXR1cm4gISFmaW5kUGFyZW50KHRhcmdldCwgdHJ1ZSwgbm9kZSA9PiBub2RlID09PSBlbGVtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUVxdWFsIChlbDEsIGVsMikge1xuICAgIHJldHVybiBlbDEgPT09IGVsMjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVUZXh0IChlbCkge1xuICAgIHJldHVybiBuYXRpdmVNZXRob2RzLm5vZGVUZXh0Q29udGVudEdldHRlci5jYWxsKGVsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEltZ01hcE5hbWUgKGltZykge1xuICAgIHJldHVybiBpbWcudXNlTWFwLnN1YnN0cmluZygxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERvY3VtZW50RWxlbWVudCAod2luKSB7XG4gICAgcmV0dXJuIHdpbi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RvY3VtZW50RWxlbWVudCAoZWwpIHtcbiAgICByZXR1cm4gZWwgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSWZyYW1lV2luZG93ICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4iXX0=