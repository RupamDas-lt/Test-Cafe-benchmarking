window["%hammerhead%"].utils.removeInjectedScript(),function wc(_c){var Pc=_c.document;!function(g,i,u,c){var y="default"in g?g.default:g;i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u;var m="default"in c?c.default:c,v={},o=y.positionUtils,r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function t(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function b(t,s,l,a){return new(l=l||u)(function(n,e){function i(t){try{r(a.next(t))}catch(t){e(t)}}function o(t){try{r(a.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof l?e:new l(function(t){t(e)})).then(i,o)}r((a=a.apply(t,s||[])).next())})}function S(n,i){var o,r,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,r=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=i.call(n,l)}catch(t){e=[6,t],r=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var e=null,p=function(){return e},h=function(t){e=t},E=(n.create=function(t){return"left"in t?new n(t.left,t.top):"right"in t?new n(t.right,t.bottom):new n(t.x,t.y)},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.round=function(t){return void 0===t&&(t=Math.round),this.x=t(this.x),this.y=t(this.y),this},n.prototype.eql=function(t){return this.x===t.x&&this.y===t.y},n.prototype.mul=function(t){return this.x*=t,this.y*=t,this},n.prototype.distance=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},n);function n(t,e){this.x=t,this.y=e}function f(r){return b(this,void 0,c.Promise,function(){return S(this,function(t){return r?[2,c.Promise.resolve(v.position.getWindowPosition()).then(function(t){var e=t.x,n=t.y,i=e+r.x,o=n+r.y;return new E(i,o)})]:[2,null]})})}var l=m.eventSandbox.eventSimulator,a=m.utils.extend,s=m.nativeMethods,d=(w.leaveElement=function(t,e,n,i){l.mouseout(e,a({relatedTarget:t},i));for(var o=e;o&&o!==n;)l.mouseleave(o,a({relatedTarget:t},i)),o=s.nodeParentNodeGetter.call(o)},w.enterElement=function(t,e,n,i){l.mouseover(t,a({relatedTarget:e},i));for(var o=t,r=[];o&&o!==n;)r.push(o),o=g.domUtils.getParentExceptShadowRoot(o);for(var s=r.length-1;-1<s;s--)l.mouseenter(r[s],a({relatedTarget:e},i))},w.move=function(t,e,n){l[t](e,n)},w);function w(){}var _=(P.dragAndDrop=function(t,e,n,i){return l.drag(t,i),e!==n&&(g.domUtils.isElementInDocument(e)&&(i.relatedTarget=n,l.dragenter(e,i)),n&&(i.relatedTarget=e,l.dragleave(n,i))),!l.dragover(e,i)},P);function P(){}var A=y.positionUtils,x=y.domUtils,C=y.eventUtils,T=m.utils.browser,M=(U.prototype.setup=function(){this.dragAndDropMode=!1,this.dropAllowed=!1},U.prototype.leaveElement=function(){},U.prototype.move=function(){},U.prototype.enterElement=function(){},U.prototype.dragAndDrop=function(){},U.prototype.teardown=function(){},U.prototype.run=function(t,e,n,i,o){var r=e&&g.domUtils.isElementInDocument(e),s=e&&g.domUtils.isElementInIframe(e)&&!g.domUtils.getIframeByElement(e);r&&!s||(e=null);var l=t!==e,a=l?g.domUtils.getCommonAncestor(t,e):null;this.setup(),l&&e&&this.leaveElement(t,e,a,n),T.isIE&&this.move(t,n),l&&g.domUtils.isElementInDocument(t)&&this.enterElement(t,e,a,n),T.isIE||this.move(t,n),this.dragAndDrop(i,t,e,n,o),this.teardown(t,n,e);var u=this.dragAndDropMode,c=this.dropAllowed;return this.dragAndDropMode=!1,this.dropAllowed=!1,{dragAndDropMode:u,dropAllowed:c}},U);function U(t){var e=t.moveEvent;this.dragAndDropMode=!1,this.dropAllowed=!1,this.moveEvent=e}var D,I=m.eventSandbox.eventSimulator,k=(t(B,D=M),B.prototype.leaveElement=function(t,e,n,i){d.leaveElement(t,e,n,i)},B.prototype.enterElement=function(t,e,n,i){d.enterElement(t,e,n,i)},B.prototype.move=function(t,e){this._needEmulateMoveEvent()&&d.move(this.moveEvent,t,e)},B.prototype.teardown=function(t,e,n){this._needEmulateMoveEvent()&&g.domUtils.isElementInDocument(t)&&t!==n&&I[this.moveEvent](t,e)},B.prototype._needEmulateMoveEvent=function(){return"touchmove"!==this.moveEvent||this.holdLeftButton},B);function B(t){var e=D.call(this,t)||this;return e.holdLeftButton=t.holdLeftButton,e}var O,N=(t(F,O=M),F.prototype.setup=function(){O.prototype.setup.call(this),this.dragAndDropMode=!0},F.prototype.dragAndDrop=function(t,e,n,i){this.dropAllowed=_.dragAndDrop(t,e,n,i)},F);function F(){return null!==O&&O.apply(this,arguments)||this}var L,K=m.eventSandbox.eventSimulator,Y=(t(V,L=M),V.prototype.setup=function(){L.prototype.setup.call(this),this.dragAndDropMode=!0},V.prototype.leaveElement=function(t,e,n,i){d.leaveElement(t,e,n,i)},V.prototype.move=function(t,e){d.move(this.moveEvent,t,e)},V.prototype.enterElement=function(t,e,n,i){d.enterElement(t,e,n,i)},V.prototype.dragAndDrop=function(t,e,n,i,o){var r=K.dragstart(t,i);o.setReadOnlyMode(),r?this.dropAllowed=_.dragAndDrop(t,e,n,i):this.dragAndDropMode=!1},V.prototype.run=function(t,e,n,i,o){return L.prototype.run.call(this,t,null,n,i,o)},V);function V(){return null!==L&&L.apply(this,arguments)||this}function R(t,e,n){return new(t?e?N:Y:k)(n)}var W=m.Promise,X=m.eventSandbox.message;function H(t,i,e){return new W(function(n){X.on(X.SERVICE_MSG_RECEIVED_EVENT,function t(e){e.message.cmd===i&&(X.off(X.SERVICE_MSG_RECEIVED_EVENT,t),n(e.message))}),X.sendServiceMsg(t,e)})}function q(t){return t.top!==t}var G=m.Promise,z=m.nativeMethods,j=m.utils.browser,$=m.eventSandbox.focusBlur,Z=y.contentEditable,J=y.textSelection,Q=y.domUtils,tt=y.styleUtils,et=m.eventSandbox.message,nt="automation|iframe|request",it="automation|iframe|response";function ot(v,g,E){var t=this;return new G(function(p){return b(t,void 0,void 0,function(){var s,n,i,o,r,l,a,u,c,h,f,d,m;return S(this,function(t){switch(t.label){case 0:return q(_c)?[4,H({cmd:nt},it,_c.parent)]:[3,2];case 1:t.sent(),t.label=2;case 2:if(s=Q.getActiveElement(),n=Q.isTextEditableElement(v),i=Q.closest(v,"label[for]"),o=Q.isElementFocusable(v),r=!o&&i,l=Q.isContentEditableElement(v),a=l?Z.findContentEditableParent(v):v,g&&j.isWebKit&&n&&J.select(v,0,0),r)return g&&(e=i,Q.isElementFocusable(e)?$.focus(e,y.noop,!1,!0):st(e)),p(),[2];if(u=!g,c=!1,!o&&!l){if(h=Q.findDocument(a),f=z.documentActiveElementGetter.call(h),d=Q.isBodyElement(f),m=Q.isBodyElement(a)?a:Q.getFocusableParent(a),f&&!d&&Q.containsElement(f,a)||d&&Q.isBodyElement(m))return p(),[2];a=m||h.body,c=!0}return $.focus(a,function(){var t,e,n,i,o,r;!g||l||v===Q.getActiveElement()?(t=v,e=E,o=Q.isTextEditableElement(t),r=Q.isContentEditableElement(t),o||r?r&&isNaN(parseInt(e,10))?J.setCursorToLastVisiblePosition(t):(n=isNaN(parseInt(e,10))?Q.getElementValue(t).length:e,J.select(t,n,n)):(i=Z.findContentEditableParent(t))&&J.setCursorToLastVisiblePosition(Z.findContentEditableParent(i)),g||Q.getActiveElement()===s?p():$.focus(s,p,!0,!0)):p()},u,!0,!1,c),[2]}var e})})})}function rt(t){var e=Q.closest(t,"label[for]"),n=e&&(e.control||Pc.getElementById(e.htmlFor));return n&&tt.isElementVisible(n)?n:null}function st(t){var e=rt(t);e&&Q.getActiveElement()!==e&&$.focus(e,y.noop,!1,!0)}et.on(et.SERVICE_MSG_RECEIVED_EVENT,function(t){var e;t.message.cmd===nt&&(e=Q.findIframeByWindow(t.source),$.focus(e,function(){et.sendServiceMsg({cmd:it},t.source)},!1))});var lt=m.Promise,at=m.nativeMethods;function ut(){return new lt(function(t){return at.setTimeout.call(_c,t,0)})}var ct=m.utils.browser,ht=m.eventSandbox.eventSimulator,ft=m.eventSandbox.listeners,dt=m.nativeMethods,mt=y.domUtils,pt=y.styleUtils,vt=i.selectElement,gt=(Et.prototype.run=function(){this.eventState.clickElement&&ht.click(this.eventState.clickElement,this.eventArgs.options),mt.isElementFocusable(this.eventArgs.element)||st(this.eventArgs.element)},Et);function Et(t,e){this.eventState=t,this.eventArgs=e}var yt,bt=(t(St,yt=gt),St.prototype.run=function(){function t(t){n=dt.eventTargetGetter.call(t)===e.input}var e=this,n=!1;ft.addInternalEventBeforeListener(_c,["focus"],t),yt.prototype.run.call(this),ft.removeInternalEventBeforeListener(_c,["focus"],t),mt.isElementFocusable(this.targetElement)&&!n&&this._ensureBoundElementFocusRaised()},St.prototype._ensureBoundElementFocusRaised=function(){ht.focus(this.input)},St);function St(t,e){var n=yt.call(this,t,e)||this;return n.targetElement=n.eventArgs.element,n.input=rt(n.eventArgs.element),n}var wt,_t=(t(Pt,wt=gt),Pt.prototype.run=function(){wt.prototype.run.call(this),this._toggleSelectOptionList()},Pt.prototype._toggleSelectOptionList=function(){var t=this.eventArgs.element;1===pt.getSelectElementSize(t)&&!1!==this.eventState.simulateDefaultBehavior&&(vt.isOptionListExpanded(t)?vt.collapseOptionList():vt.expandOptionList(t))},Pt);function Pt(t,e){return wt.call(this,t,e)||this}var At,xt=(t(Ct,At=gt),Ct.prototype.run=function(){return this.eventArgs.element},Ct);function Ct(t,e){return At.call(this,t,e)||this}var Tt,Mt,Ut=(t(Dt,Tt=bt),Dt.prototype.run=function(){function t(){e=!0}var e=!1;ft.addInternalEventBeforeListener(_c,["change"],t),Tt.prototype.run.call(this),ft.removeInternalEventBeforeListener(_c,["change"],t),!ct.isChrome||e||this.checkbox.disabled||this._isClickableElementInsideLabel(this.targetElement)||this._ensureCheckboxStateChanged()},Dt.prototype._ensureCheckboxStateChanged=function(){this.checkbox.checked=!this.checkbox.checked,ht.change(this.checkbox)},Dt.prototype._isClickableElementInsideLabel=function(t){var e=mt.isAnchorElement(t)&&t.getAttribute("href"),n=mt.isButtonElement(t);return e||n},Dt);function Dt(t,e){var n=Tt.call(this,t,e)||this;return n.checkbox=n.input,n}function It(){}function kt(){return Mt.call(this)||this}t(kt,Mt=It),kt.prototype.mousedown=function(){throw new Error("not implemented")},kt.prototype.mouseup=function(){throw new Error("not implemented")};var Bt,Ot=m.Promise,Nt=m.utils.browser,Ft=m.utils.featureDetection,Lt=m.eventSandbox.eventSimulator,Kt=m.eventSandbox.listeners,Yt=y.domUtils,Vt=y.eventUtils,Rt=y.arrayUtils,Wt=(t(Xt,Bt=It),Xt.prototype.mousedown=function(t){var e=this;this.targetElementParentNodes=Yt.getParents(t.element),this.mouseDownElement=t.element,this._raiseTouchEvents(t);var n=Yt.getActiveElement();this.activeElementBeforeMouseDown=n;var i=(Nt.isWebKit||Nt.isIE)&&Yt.isSelectElement(this.mouseDownElement);return i&&this._bindMousedownHandler(),this._bindBlurHandler(n),this._isTouchEventWasCancelled()||(this.eventState.simulateDefaultBehavior=Lt.mousedown(t.element,t.options)),!1===this.eventState.simulateDefaultBehavior&&(this.eventState.simulateDefaultBehavior=i&&!this.eventState.mousedownPrevented),this._ensureActiveElementBlur(n).then(function(){return e._focus(t)})},Xt.prototype.mouseup=function(t,e){var n,i,o,r,s;e.element=t,this.eventState.clickElement=(n=this.mouseDownElement,i=t,o=this.targetElementParentNodes,r=Yt.getParents(i),s=Yt.isTheSameNode(i,n),Nt.isFirefox?s?n:null:s?Rt.equals(o,r)?n:null:n.contains(i)&&!Yt.isEditableFormElement(i)?n:i.contains(n)?i:Rt.getCommonElement(r,o));var l={},a=function(t){l=t.timeStamp,Kt.removeInternalEventBeforeListener(_c,["mouseup"],a)};return Nt.isIE||Kt.addInternalEventBeforeListener(_c,["mouseup"],a),this._isTouchEventWasCancelled()||Lt.mouseup(t,e.options),e.options&&(e.options.timeStamp=l),this._click(e)},Xt.prototype._click=function(u){return b(this,void 0,m.Promise,function(){var a;return S(this,function(t){var e,n,i,o,r,s,l;return e=this.eventState,i=rt((n=u).element),o=mt.isSelectElement(n.element),r=mt.isOptionElement(n.element),s=mt.isLabelElement(n.element)&&i,l=i&&mt.isCheckboxElement(i),a=new(o?_t:r?xt:l?Ut:s?bt:gt)(e,n),this._isTouchEventWasCancelled()||a.run(),[2,u]})})},Xt.prototype._isTouchEventWasCancelled=function(){return this.eventState.touchStartCancelled||this.eventState.touchEndCancelled},Xt.prototype._bindMousedownHandler=function(){var e=this,n=function(t){e.eventState.mousedownPrevented=t.defaultPrevented,Vt.preventDefault(t),Vt.unbind(e.element,"mousedown",n)};Vt.bind(this.element,"mousedown",n)},Xt.prototype._bindBlurHandler=function(t){var e=this,n=function(){e.eventState.blurRaised=!0,Vt.unbind(t,"blur",n,!0)};Vt.bind(t,"blur",n,!0)},Xt.prototype._ensureActiveElementBlur=function(e){var n=this;return new Ot(function(t){Yt.getActiveElement()===e||n.eventState.blurRaised?t():Nt.isIE&&Nt.version<12?ut().then(function(){n.eventState.blurRaised||Lt.blur(e),t()}):(Lt.blur(e),t())})},Xt.prototype._focus=function(t){return!1===this.eventState.simulateDefaultBehavior?Ot.resolve():ot(Yt.isContentEditableElement(this.element)?this.element:t.element,!Nt.isIE||this.activeElementBeforeMouseDown===Yt.getActiveElement(),this.caretPos)},Xt.prototype._raiseTouchEvents=function(t){Ft.isTouchDevice&&(this.eventState.touchStartCancelled=!Lt.touchstart(t.element,t.options),this.eventState.touchEndCancelled=!Lt.touchend(t.element,t.options))},Xt);function Xt(t,e){var n=Bt.call(this)||this;return n.element=t,n.caretPos=e,n.targetElementParentNodes=[],n.activeElementBeforeMouseDown=null,n.mouseDownElement=null,n.eventState={mousedownPrevented:!1,blurRaised:!1,simulateDefaultBehavior:!0,clickElement:null,touchStartCancelled:!1,touchEndCancelled:!1},n}var Ht=(qt.prototype._ensureActiveWindow=function(t){this._activeWindow!==t&&this._activeWindow!==t.parent&&this._activeWindow.parent!==t&&(this._activeWindow=t)},qt.prototype.isActive=function(t){return this._ensureActiveWindow(t),this._activeWindow===t},qt.prototype.setActiveWindow=function(t){this._activeWindow=t},qt.prototype.getActiveWindow=function(t){return this._ensureActiveWindow(t),this._activeWindow},qt.prototype.getPosition=function(){return new E(this._x,this._y)},qt.prototype.move=function(t){return this._x=t.x,this._y=t.y,this._ui.move(t)},qt.prototype.hide=function(){return this._ui.hide?this._ui.hide():c.Promise.resolve()},qt.prototype.show=function(){return this._ui.show?this._ui.show():c.Promise.resolve()},qt.prototype.leftButtonDown=function(){return this._ui.leftButtonDown()},qt.prototype.rightButtonDown=function(){return this._ui.rightButtonDown()},qt.prototype.buttonUp=function(){return this._ui.buttonUp()},qt);function qt(t,e){this._ui=e,this._x=-1,this._y=-1,this._activeWindow=t}var Gt=q(_c)?i.iframeCursorUI:i.cursorUI,zt=new Ht(_c.top,Gt),jt=y.positionUtils,$t=y.ScrollAutomation;!function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e];v[i]=t[i]}}({scroll:function(t,e){return new $t(t,e).run()},getElementExceptUI:function(e,n){return void 0===n&&(n=!1),i.hide(n).then(function(){var t=o.getElementFromPoint(e);return i.show(n).then(function(){return t})})},position:jt,style:y.styleUtils,event:y.eventUtils,createEventSequence:R,sendRequestToFrame:y.sendRequestToFrame,ensureMouseEventAfterScroll:function(s,l,a){return b(this,void 0,m.Promise,function(){var e,n,i,o,r;return S(this,function(t){switch(t.label){case 0:return s&&x.contains(l,s)&&a?(e=p(),n=x.getCommonAncestor(s,e),[4,A.getClientPosition(s)]):[2];case 1:return[4,f(i=t.sent())];case 2:return(o=t.sent())&&(r={clientX:i.x,clientY:i.y,screenX:o.x,screenY:o.y,ctrl:!1,alt:!1,shift:!1,meta:!1,buttons:C.BUTTONS_PARAMETER.leftButton},d.leaveElement(s,e,n,r),d.enterElement(s,e,n,r),h(s)),[2]}})})},automations:{click:{createMouseClickStrategy:function(t,e){return new Wt(t,e)}},_ensureWindowAndCursorForLegacyTests:function(t){t.window=t.window||_c,t.cursor=zt}}});var Zt=m.nativeMethods,Jt=/^((mouse\w+)|((dbl)?click)|(contextmenu))$/,Qt=/^((drag\w*)|(drop))$/,te=/^key\w+$/,ee=/^(before)?input$/,ne=/^(blur|(focus(in|out)?))$/,ie=/^pointer\w+/,oe={click:1,dblclick:2,mousedown:1,mouseup:1},re="MouseEvent",se="PointerEvent",le="KeyboardEvent",ae="InputEvent",ue="FocusEvent",ce=(he.prototype.run=function(){var t=this.options,e=t.bubbles,n=t.cancelable,i=t.detail,o=(t.view,t.buttons),e=!1!==e,n=!1!==n,i=i||oe[this.eventName],o=void 0===o?1:o;Object.assign(this.options,{bubbles:e,cancelable:n,detail:i,view:_c,buttons:o});var r,s=he._getEventCtorByEventType(this.eventName,this.options.eventConstructor);s&&(r=new s(this.eventName,this.options),this.element.dispatchEvent(r))},he._getEventCtorByEventType=function(t,e){if(e&&"function"==typeof he._getEventCtorFromWindow(e)){var n=he._getEventCtorFromNativeMethods(e);if(n&&"function"==typeof n)return n}return Jt.test(t)||Qt.test(t)?he._getEventCtorFromNativeMethods(re):ie.test(t)?he._getEventCtorFromNativeMethods(se):te.test(t)?he._getEventCtorFromNativeMethods(le):ee.test(t)?he._getEventCtorFromNativeMethods(ae):ne.test(t)?he._getEventCtorFromNativeMethods(ue):he._getEventCtorFromNativeMethods("CustomEvent")},he._getEventCtorFromNativeMethods=function(t){return Zt["Window"+t]||he._getEventCtorFromWindow(t)},he._getEventCtorFromWindow=function(t){return _c[t]},he);function he(t,e,n){this.element=t,this.eventName=e,this.options=n}function fe(t){var e="array"+t.charAt(0).toUpperCase()+t.slice(1),n=c.nativeMethods[e];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.call.apply(n,t)}}fe("filter"),fe("map"),fe("slice"),fe("splice"),fe("unshift"),fe("forEach"),fe("indexOf");var de=fe("some"),me=(fe("reverse"),fe("reduce"),fe("concat"),fe("join"),m.utils.browser,m.nativeMethods),pe=(m.utils.style.get,m.utils.dom.getActiveElement,m.utils.dom.findDocument,m.utils.dom.isElementInDocument,m.utils.dom.isElementInIframe,m.utils.dom.getIframeByElement,m.utils.dom.isCrossDomainWindows,m.utils.dom.getSelectParent,m.utils.dom.getChildVisibleIndex,m.utils.dom.getSelectVisibleChildren,m.utils.dom.isElementNode,m.utils.dom.isTextNode,m.utils.dom.isRenderedNode,m.utils.dom.isIframeElement,m.utils.dom.isInputElement,m.utils.dom.isButtonElement,m.utils.dom.isFileInput,m.utils.dom.isTextAreaElement,m.utils.dom.isAnchorElement,m.utils.dom.isImgElement),ve=(m.utils.dom.isFormElement,m.utils.dom.isLabelElement,m.utils.dom.isSelectElement,m.utils.dom.isRadioButtonElement,m.utils.dom.isColorInputElement,m.utils.dom.isCheckboxElement,m.utils.dom.isOptionElement,m.utils.dom.isSVGElement,m.utils.dom.isMapElement,m.utils.dom.isBodyElement,m.utils.dom.isHtmlElement,m.utils.dom.isDocument,m.utils.dom.isWindow,m.utils.dom.isTextEditableInput,m.utils.dom.isTextEditableElement,m.utils.dom.isTextEditableElementAndEditingAllowed,m.utils.dom.isContentEditableElement,m.utils.dom.isDomElement,m.utils.dom.isShadowUIElement,m.utils.dom.isShadowRoot,m.utils.dom.isElementFocusable,m.utils.dom.isHammerheadAttr,m.utils.dom.isElementReadOnly,m.utils.dom.getScrollbarSize,m.utils.dom.getMapContainer,m.utils.dom.getTagName),ge=m.utils.dom.closest,Ee=m.utils.dom.getParents;function ye(t,e){return t.contains?t.contains(e):de(t,function(t){return t.contains(e)})}function be(t){return me.nodeTextContentGetter.call(t)}function Se(n,e){return c.Promise.resolve(n===Pc.documentElement).then(function(t){if(t)return new E(0,0);var e=c.utils.browser.isFirefox?Math.ceil:Math.round;return c.Promise.resolve(v.position.getOffsetPosition(n,e)).then(function(t){return E.create(t)})}).then(function(t){return t.add(e)})}function we(t){var e=t/2;return e<1?0:Math.round(e)}function _e(o){return b(this,void 0,void 0,function(){var e,n,i;return S(this,function(t){switch(t.label){case 0:return[4,v.position.getElementRectangle(o)];case 1:return e=t.sent(),n=we(e.width),i=we(e.height),[2,{offsetX:n,offsetY:i}]}})})}function Pe(l,a,u){return b(this,void 0,void 0,function(){var e,n,i,o,r,s;return S(this,function(t){switch(t.label){case 0:return[4,_e(l)];case 1:return e=t.sent(),a="number"==typeof a?Math.round(a):e.offsetX,u="number"==typeof u?Math.round(u):e.offsetY,0<a&&0<u?[2,{offsetX:a,offsetY:u}]:[4,v.position.getClientDimensions(l)];case 2:return n=t.sent(),i=Math.round(Math.max(l.scrollWidth,n.width)),o=Math.round(Math.max(l.scrollHeight,n.height)),r=n.scrollbar.right+n.border.left+n.border.right+i,s=n.scrollbar.bottom+n.border.top+n.border.bottom+o,[2,{offsetX:a<0?r+a:a,offsetY:u<0?s+u:u}]}})})}function Ae(t,n){return c.Promise.resolve(v.position.getElementFromPoint(t)).then(function(e){return c.Promise.resolve(ye(n,e)).then(function(t){return t&&be(e)}).then(function(t){return t||e&&e===n?e:null})})}function xe(n,i){if(!i||!n||n===i)return n;if("tref"===ve(i))return i;var e,o,t="area"===ve(i)&&pe(n);return c.utils.browser.isFirefox&&t?(e=n,o=i,c.Promise.resolve(ge(o,"map")).then(function(t){return t&&t.name===e.useMap.substring(1)?o:e})):c.Promise.resolve(ge(i,"a")).then(function(t){return!!t}).then(function(t){return!!t&&c.Promise.resolve(ye(i,n)).then(function(t){return t&&be(n)}).then(function(t){return!t&&be(i)})}).then(function(t){return t?c.Promise.resolve(v.position.getClientDimensions(i)).then(function(e){return Ae({x:e.right-1,y:e.top+1},i).then(function(t){return t||Ae({x:e.left+1,y:e.bottom-1},i)}).then(function(t){return t||n})}):n})}function Ce(i,o,r){return v.getElementExceptUI(i).then(function(t){var e,n=c.Promise.resolve(t);return!t&&(!(e=o).parent||e.parent!==e)&&0<i.x&&0<i.y&&(n=n.then(function(){return v.getElementExceptUI(i,!0)})),n.then(function(t){return xe(t,r)})})}m.utils.dom.findParent,m.utils.dom.getTopSameDomainWindow,m.utils.dom.getParentExceptShadowRoot;var Te={elementIsInvisibleError:"elementIsInvisibleError",foundElementIsNotTarget:"foundElementIsNotTarget"},Me=(Object.defineProperty(Ue.prototype,"mouseActionStepDelay",{get:function(){return 1===this._speedFactor?10:400*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(Ue.prototype,"keyActionStepDelay",{get:function(){return 1===this._speedFactor?10:200*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(Ue.prototype,"cursorSpeed",{get:function(){return Math.pow(400,this._speedFactor)/4},enumerable:!1,configurable:!0}),Object.defineProperty(Ue.prototype,"draggingSpeed",{get:function(){return Math.pow(16,this._speedFactor)/4},enumerable:!1,configurable:!0}),Ue);function Ue(t){this._speedFactor=t||1}function De(e){var n=c.nativeMethods.setTimeout;return new c.Promise(function(t){return n(t,e)})}function Ie(){return De(0)}var ke=(Be.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},Be.prototype._assignFrom=function(t,e,n){if(void 0===n&&(n={}),t)for(var i=this._getAssignableProperties(),o=0;o<i.length;o++){for(var r,s=i[o],l=s.name,a=s.type,u=s.required,c=s.init,h=s.defaultValue,f=l.split("."),d=f.length-1,m=f[d],p=t,v=this,g=0;g<d&&p&&v;g++)p=p[f[g]],v=v[f[g]];v&&"defaultValue"in i[o]&&(v[l]=h),p&&v&&(void 0===(r=p[m])&&!u||(e&&a&&a(l,r),v[m]=c?c(l,r,n,e):r))}},Be);function Be(){}function Oe(i){return function(t,e){var n=typeof e;if("number"!=n)throw new i(t,n);if(isNaN(e)||!isFinite(e)||e!==Math.floor(e))throw new i(t,e)}}function Ne(t,e){this.code=t,this.isTestCafeError=!0,this.callsite=e||null}var Fe,Le,Ke,Ye="E1",Ve="E4",Re="E5",We="E9",Xe="E10",He="E11",qe="E12",Ge="E24",ze="E26",je="E27",$e="E28",Ze="E29",Je="E30",Qe="E31",tn="E32",en="E33",nn="E34",on="E35",rn="E36",sn="E37",ln="E39",an="E40",un="E41",cn="E42",hn="E43",fn="E44",dn="E45",mn="E46",pn="E49",vn="E50",gn="E51",En="E52",yn="E57",bn="E64",Sn="E65",wn="E68",_n="E69",Pn="E70",An="E71",xn="E72",Cn="E73",Tn="E74",Mn="E76",Un="E77",Dn="E78",In="E82",kn="E83",Bn="E90",On="E91",Nn="E92",Fn="E93",Ln="E94",Kn="E95",Yn=(t(Vn,Fe=Ne),Vn);function Vn(t,e,n){var i=Fe.call(this,t)||this;return i.optionName=e,i.actualValue=n,i}function Rn(t,e){var n=Le.call(this,pn,e)||this;return n.instantiationCallsiteName=t,n}function Wn(t,e){var n=Ke.call(this,vn,e)||this;return n.instantiationCallsiteName=t,n}t(Rn,Le=Ne),t(Wn,Ke=Ne);var Xn,Hn,qn,Gn,zn,jn,$n,Zn,Jn=(t(Qn,Xn=Ne),Qn);function Qn(t,e,n){var i=e.apiFnChain,o=e.apiFnIndex,r=Xn.call(this,t,n)||this;return r.apiFnChain=i,r.apiFnIndex=o,r}function ti(t){return Hn.call(this,gn,t)||this}function ei(t,e){return qn.call(this,En,e,t)||this}function ni(t,e){var n=Gn.call(this,Ye)||this;return n.errStack=t,n.pageDestUrl=e,n}function ii(t,e,n){var i=zn.call(this,Ve,n)||this;return i.errMsg=String(e),i.instantiationCallsiteName=t,i}function oi(t,e,n,i){var o=jn.call(this,Re,i)||this;return o.errMsg=String(e),o.property=n,o.instantiationCallsiteName=t,o}function ri(t){var e=$n.call(this,bn)||this;return e.errMsg=String(t),e}function si(t,e){var n=Zn.call(this,Sn)||this;return n.errMsg=String(t),n.moduleName=e,n}t(ti,Hn=Ne),t(ei,qn=Jn),t(ni,Gn=Ne),t(ii,zn=Ne),t(oi,jn=Ne),t(ri,$n=Ne),t(si,Zn=Ne);var li,ai=(t(ui,li=Yn),ui);function ui(t,e){return li.call(this,We,t,e)||this}var ci,hi=(t(fi,ci=Yn),fi);function fi(t,e){return ci.call(this,Xe,t,e)||this}var di,mi=(t(pi,di=Yn),pi);function pi(t,e){return di.call(this,He,t,e)||this}var vi,gi=(t(Ei,vi=Yn),Ei);function Ei(t,e){return vi.call(this,qe,t,e)||this}var yi,bi=(t(Si,yi=Yn),Si);function Si(t,e){return yi.call(this,Bn,t,e)||this}var wi,_i=(t(Pi,wi=Yn),Pi);function Pi(t,e){return wi.call(this,On,t,e)||this}var Ai,xi=(t(Ci,Ai=Yn),Ci);function Ci(t,e){return Ai.call(this,Nn,t,e)||this}var Ti,Mi=(t(Ui,Ti=Yn),Ui);function Ui(t,e){return Ti.call(this,Fn,t,e)||this}var Di,Ii=(t(ki,Di=Yn),ki);function ki(t,e){return Di.call(this,Ln,t,e)||this}var Bi,Oi,Ni,Fi,Li,Ki,Yi,Vi,Ri,Wi,Xi,Hi,qi,Gi,zi,ji,$i,Zi,Ji,Qi,to,eo,no,io,oo,ro,so,lo,ao,uo,co,ho,fo,mo,po,vo=(t(go,Bi=Yn),go);function go(t,e){return Bi.call(this,Kn,t,e)||this}function Eo(t,e){return Oi.call(this,Ge,e,t)||this}function yo(t){return Ni.call(this,ze,t)||this}function bo(t){var e=Fi.call(this,je)||this;return e.nodeDescription=t,e}function So(t,e){var n=Li.call(this,$e,e)||this;return n.argumentName=t,n}function wo(t){var e=Ki.call(this,Ze)||this;return e.argumentName=t,e}function _o(t,e){var n=Yi.call(this,Je)||this;return n.argumentName=t,n.nodeDescription=e,n}function Po(){return Vi.call(this,Qe)||this}function Ao(){return Ri.call(this,tn)||this}function xo(t){var e=Wi.call(this,en)||this;return e.argumentName=t,e}function Co(){return Xi.call(this,on)||this}function To(t){var e=Hi.call(this,rn)||this;return e.argumentName=t,e}function Mo(t,e){var n=qi.call(this,sn)||this;return n.filePaths=t,n.scannedFilePaths=e,n}function Uo(){return Gi.call(this,nn)||this}function Do(t,e){var n=zi.call(this,un)||this;return n.properties=t?"scrollTargetY property":e?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}function Io(t,e){var n=ji.call(this,yn)||this;return t<=0?e<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}function ko(t){return $i.call(this,an,t)||this}function Bo(){return Zi.call(this,ln)||this}function Oo(){return Ji.call(this,cn)||this}function No(){return Qi.call(this,_n)||this}function Fo(){return to.call(this,wn)||this}function Lo(){return eo.call(this,Pn)||this}function Ko(){return no.call(this,An)||this}function Yo(){return io.call(this,Cn)||this}function Vo(){return oo.call(this,In)||this}function Ro(t){var e=ro.call(this,Dn)||this;return e.errMsg=t,e}function Wo(){return so.call(this,Tn)||this}function Xo(){return lo.call(this,Mn)||this}function Ho(){return ao.call(this,Un)||this}function qo(){return uo.call(this,xn)||this}function Go(){return co.call(this,kn)||this}function zo(){return ho.call(this,hn)||this}function jo(){return fo.call(this,fn)||this}function $o(t,e){var n=mo.call(this,dn)||this;return n.dialogType=t,n.pageUrl=e,n}function Zo(t,e,n){var i=po.call(this,mn)||this;return i.dialogType=t,i.errMsg=e,i.pageUrl=n,i}t(Eo,Oi=Jn),t(yo,Ni=Ne),t(bo,Fi=Ne),t(So,Li=Jn),t(wo,Ki=Ne),t(_o,Yi=Ne),t(Po,Vi=Ne),t(Ao,Ri=Ne),t(xo,Wi=Ne),t(Co,Xi=Ne),t(To,Hi=Ne),t(Mo,qi=Ne),t(Uo,Gi=Ne),t(Do,zi=Ne),t(Io,ji=Ne),t(ko,$i=Ne),t(Bo,Zi=Ne),t(Oo,Ji=Ne),t(No,Qi=Ne),t(Fo,to=Ne),t(Lo,eo=Ne),t(Ko,no=Ne),t(Yo,io=Ne),t(Vo,oo=Ne),t(Ro,ro=Ne),t(Wo,so=Ne),t(Xo,lo=Ne),t(Ho,ao=Ne),t(qo,uo=Ne),t(Go,co=Ne),t(zo,ho=Ne),t(jo,fo=Ne),t($o,mo=Ne),t(Zo,po=Ne);var Jo,Qo,tr,er,nr,ir,or,rr,sr,lr,ar,ur=Oe(ai),cr=(Qo=Oe(Jo=hi),function(t,e){if(Qo(t,e),e<0)throw new Jo(t,e)}),hr=(tr=mi,function(t,e){var n=typeof e;if("boolean"!=n)throw new tr(t,n)}),fr=(er=gi,function(t,e){var n=typeof e;if("number"!=n)throw new er(t,n);if(isNaN(e)||e<.01||1<e)throw new er(t,e)}),dr=(nr=bi,function(t,e){var n=typeof e;if("string"!=n)throw new nr(t,n)}),mr=(ir=_i,function(t,e){if(!(e instanceof Date))throw new ir(t,e)}),pr=(or=xi,function(t,e){if(isNaN(Number(e)))throw new or(t,typeof e)}),vr=(rr=Mi,function(t,e){var n=typeof e;if("string"!=n&&!(e instanceof URL))throw new rr(t,n)}),gr=(sr=Ii,function(t,e){var n=typeof e;if("object"!=n&&!(e instanceof URLSearchParams))throw new sr(t,n)}),Er=(lr=vo,function(t,e){var n=typeof e;if("object"!=n)throw new lr(t,n)}),yr=(t(br,ar=ke),br.prototype._getAssignableProperties=function(){return[{name:"speed",type:fr}]},br);function br(t,e){var n=ar.call(this)||this;return n.speed=null,n._assignFrom(t,e),n}var Sr,wr=(t(_r,Sr=yr),_r.prototype._getAssignableProperties=function(){return Sr.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:ur},{name:"offsetY",type:ur}])},_r);function _r(t,e){var n=Sr.call(this)||this;return n.offsetX=null,n.offsetY=null,n._assignFrom(t,e),n}var Pr,Ar,xr=(t(Cr,Pr=wr),Cr.prototype._getAssignableProperties=function(){return Pr.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:hr},{name:"skipParentFrames",type:hr}])},Cr);function Cr(t,e){var n=Pr.call(this)||this;return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(t,e),n}function Tr(t,e){var n=Ar.call(this)||this;return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(t,e),n}t(Tr,Ar=yr),Tr.prototype._getAssignableProperties=function(){return Ar.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:ur},{name:"scrollTargetY",type:ur},{name:"crop.left",type:ur},{name:"crop.right",type:ur},{name:"crop.top",type:ur},{name:"crop.bottom",type:ur},{name:"includeMargins",type:hr},{name:"includeBorders",type:hr},{name:"includePaddings",type:hr}])};var Mr,Ur=(t(Dr,Mr=wr),Dr.prototype._getAssignableProperties=function(){return Mr.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:hr},{name:"modifiers.alt",type:hr},{name:"modifiers.shift",type:hr},{name:"modifiers.meta",type:hr}])},Dr);function Dr(t,e){var n=Mr.call(this)||this;return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(t,e),n}var Ir,kr=(t(Br,Ir=Ur),Br.prototype._getAssignableProperties=function(){return Ir.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:cr}])},Br);function Br(t,e){var n=Ir.call(this)||this;return n.caretPos=null,n._assignFrom(t,e),n}var Or,Nr=(t(Fr,Or=Ur),Fr.prototype._getAssignableProperties=function(){return Or.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:hr},{name:"skipDefaultDragBehavior",type:hr}])},Fr);function Fr(t,e){var n=Or.call(this)||this;return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n.skipDefaultDragBehavior=!1,n._assignFrom(t,e),n}var Lr,Kr,Yr,Vr,Rr,Wr,Xr=(t(Hr,Lr=kr),Hr.prototype._getAssignableProperties=function(){return Lr.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:hr},{name:"paste",type:hr},{name:"confidential",type:hr}])},Hr);function Hr(t,e){var n=Lr.call(this)||this;return n.replace=!1,n.paste=!1,n.confidential=void 0,n._assignFrom(t,e),n}function qr(t,e){var n=Kr.call(this,t,e)||this;return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(t,e),n}function Gr(t,e){var n=Yr.call(this)||this;return n.portraitOrientation=!1,n._assignFrom(t,e),n}function zr(t,e){var n=Vr.call(this)||this;return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(t,e),n}function jr(t,e){var n=Rr.call(this)||this;return n.confidential=void 0,n._assignFrom(t,e),n}function $r(t,e){var n=Wr.call(this)||this;return n._assignFrom(t,e),n}t(qr,Kr=Ur),qr.prototype._getAssignableProperties=function(){return Kr.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:ur},{name:"destinationOffsetY",type:ur}])},t(Gr,Yr=ke),Gr.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:hr}]},t(zr,Vr=ke),zr.prototype._getAssignableProperties=function(){return[{name:"timeout",type:cr},{name:"allowUnawaitedPromise",type:hr}]},t(jr,Rr=yr),jr.prototype._getAssignableProperties=function(){return Rr.prototype._getAssignableProperties.call(this).concat([{name:"confidential",type:hr}])},t($r,Wr=ke),$r.prototype._getAssignableProperties=function(){return[{name:"name",type:dr},{name:"value",type:dr},{name:"domain",type:dr},{name:"path",type:dr},{name:"expires",type:mr},{name:"maxAge",type:pr},{name:"secure",type:hr},{name:"httpOnly",type:hr},{name:"sameSite",type:dr}]};var Zr,Jr=(t(Qr,Zr=ke),Qr.prototype._getAssignableProperties=function(){return[{name:"username",type:dr,required:!0},{name:"password",type:dr}]},Qr);function Qr(t,e){var n=Zr.call(this)||this;return n._assignFrom(t,e),n}var ts,es,ns,is=(t(os,ts=ke),os.prototype._getAssignableProperties=function(){return[{name:"protocol",type:dr},{name:"host",type:dr,required:!0},{name:"port",type:pr,required:!0},{name:"auth",type:Er,init:ls}]},os);function os(t,e){var n=ts.call(this)||this;return n._assignFrom(t,e),n}function rs(t,e){var n=es.call(this)||this;return n._assignFrom(t,e),n}function ss(t,e){var n=ns.call(this)||this;return n._assignFrom(t,e),n}function ls(t,e,n,i){return void 0===i&&(i=!0),new Jr(e,i)}function as(t,e,n,i){return void 0===i&&(i=!0),new is(e,i)}t(rs,es=ke),rs.prototype._getAssignableProperties=function(){return[{name:"url",type:vr},{name:"method",type:dr},{name:"headers",type:Er},{name:"params",type:gr},{name:"body"},{name:"timeout",type:pr},{name:"withCredentials",type:hr},{name:"auth",type:Er,init:ls},{name:"proxy",type:Er,init:as},{name:"rawResponse",type:hr}]},t(ss,ns=ke),ss.prototype._getAssignableProperties=function(){return[{name:"credentials",type:pr}]};var us=(cs.create=function(o,r,s,l){return b(this,void 0,c.Promise,function(){var e,n,i;return S(this,function(t){switch(t.label){case 0:return[4,cs.getTarget(o,s,new E(r.offsetX,r.offsetY))];case 1:return e=t.sent(),n=e.element,i=e.offset,[2,new cs(n,i,r,s,l)]}})})},cs.getTarget=function(e,n,i){return c.Promise.resolve(v.position.containsOffset(e,i.x,i.y)).then(function(t){return t?{element:e,offset:i}:c.Promise.all([Se(e,i),g.domUtils.getDocumentElement(n)]).then(function(t){var e=t[0];return{element:t[1],offset:e}})})},cs.prototype._getCursorSpeed=function(){return this.automationSettings.cursorSpeed},cs.prototype._getTargetClientPoint=function(){var o=this;return c.Promise.resolve(v.style.getElementScroll(this.element)).then(function(i){return g.domUtils.isHtmlElement(o.element)?E.create(o.offset).sub(E.create(i)).round(Math.round):c.Promise.resolve(v.position.getClientPosition(o.element)).then(function(t){var e=g.domUtils.isBodyElement(o.element),n=E.create(t).add(o.offset);return e||n.sub(E.create(i)),n.round(Math.floor)})})},cs.prototype._getEventSequenceOptions=function(e){var n=this,i=v.event.BUTTONS_PARAMETER.noButton;return f(e).then(function(t){return{eventOptions:{clientX:e.x,clientY:e.y,screenX:null==t?void 0:t.x,screenY:null==t?void 0:t.y,buttons:i,ctrl:n.modifiers.ctrl,alt:n.modifiers.alt,shift:n.modifiers.shift,meta:n.modifiers.meta},eventSequenceOptions:{moveEvent:n.moveEvent}}})},cs.prototype._runEventSequence=function(e,t){var n=t.eventOptions,i=t.eventSequenceOptions;return b(this,void 0,c.Promise,function(){return S(this,function(t){switch(t.label){case 0:return[4,v.createEventSequence(!1,this.firstMovingStepOccured,i)];case 1:return[2,t.sent().run(e,p(),n,null,null)]}})})},cs.prototype._emulateEvents=function(e,t){var n=this;return this._getEventSequenceOptions(t).then(function(t){return n._runEventSequence(e,t)}).then(function(){n.firstMovingStepOccured=!0,h(e)})},cs.prototype._movingStep=function(n){var i=this;return this.cursor.move(n).then(function(){return v.getElementExceptUI(i.cursor.getPosition())}).then(function(t){var e=i._getCorrectedTopElement(t);return e?i._emulateEvents(e,n):null}).then(Ie)},cs.prototype._getCorrectedTopElement=function(t){return t},cs.prototype._move=function(e){var n=this,i=this.cursor.getPosition(),o=E.create(e).sub(i),r=c.nativeMethods.dateNow(),s=Math.max(Math.max(Math.abs(o.x),Math.abs(o.y))/this.cursorSpeed,this.minMovingTime),l=E.create(i),a=!0;return function(e,n){return b(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e()?[4,n()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}})})}(function(){return!l.eql(e)},function(){var t;return n._needMoveCursorImmediately()?l=E.create(e):a?(a=!1,l.add({x:0<o.x?1:-1,y:0<o.y?1:-1})):(t=Math.min((c.nativeMethods.dateNow()-r)/s,1),l=E.create(o).mul(t).add(i).round(Math.floor)),n._movingStep(l)})},cs.prototype._needMoveCursorImmediately=function(){return this.touchMode},cs.prototype._scroll=function(){if(this.skipScrolling)return c.Promise.resolve(!1);var t=new xr({offsetX:this.offset.x,offsetY:this.offset.y},!1);return v.scroll(this.element,t)},cs.prototype._moveToCurrentFrame=function(t){var e=this;if(this.cursor.isActive(this.window))return c.Promise.resolve();var n=this.cursor.getPosition(),i=n.x,o=n.y,r=this.cursor.getActiveWindow(this.window),s=null,l=null,a={cmd:"automation|move|request",startX:i,startY:o,endX:t.x,endY:t.y,modifiers:this.modifiers,speed:this.speed};return c.Promise.resolve().then(function(){if(r.parent===e.window)return c.Promise.resolve(g.domUtils.findIframeByWindow(r)).then(function(t){return s=t,c.Promise.resolve(v.position.getIframeClientCoordinates(t)).then(function(t){a.left=t.left,a.top=t.top,a.right=t.right,a.bottom=t.bottom})})}).then(function(){return v.getElementExceptUI(e.cursor.getPosition())}).then(function(t){return l=t===s,r.parent===e.window&&(a.iframeUnderCursor=l),v.sendRequestToFrame(a,"automation|move|response",r)}).then(function(t){if(e.cursor.setActiveWindow(e.window),l||g.domUtils.isIframeWindow(e.window))return e.cursor.move(t)})},cs.prototype.run=function(){var n=this;return this._scroll().then(function(){return c.Promise.all([n._getTargetClientPoint(),v.style.getWindowDimensions(n.window)])}).then(function(t){var e=t[0];if(t[1].contains(e))return n._moveToCurrentFrame(e).then(function(){return n._move(e)})})},cs);function cs(t,e,n,i,o){this.touchMode=c.utils.featureDetection.isTouchDevice,this.moveEvent=this.touchMode?"touchmove":"mousemove",this.automationSettings=new Me(n.speed),this.cursorSpeed=this._getCursorSpeed(),this.element=t,this.window=i,this.offset=e,this.cursor=o,this.minMovingTime=n.minMovingTime||0,this.modifiers=n.modifiers||{},this.skipScrolling=n.skipScrolling,this.skipDefaultDragBehavior=n.skipDefaultDragBehavior,this.speed=n.speed,this.firstMovingStepOccured=!1}var hs=(fs.prototype.on=function(t,e){this._eventsListeners[t]||(this._eventsListeners[t]=[]),this._eventsListeners[t].push(e)},fs.prototype.once=function(n,i){var o=this;this.on(n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.off(n,i),i.apply(void 0,t)})},fs.prototype.off=function(t,e){var n=this._eventsListeners[t];n&&(this._eventsListeners[t]=c.nativeMethods.arrayFilter.call(n,function(t){return t!==e}))},fs.prototype.offAll=function(t){t?this._eventsListeners[t]=[]:this._eventsListeners={}},fs.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._eventsListeners[e];if(i)for(var o=0;o<i.length;o++)try{i[o].apply(this,t)}catch(t){if(!(t.message&&-1<t.message.indexOf("freed script")))throw t;this.off(e,i[o])}},fs);function fs(){this._eventsListeners={}}var ds=(ms.create=function(t){var n=t.element,i=t.clientPoint,o=t.screenPoint,r=t.isTarget,s=t.inMoving;return b(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return e=null,i?[4,f(i)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[2,new ms({element:n,clientPoint:i,screenPoint:o,isTarget:r,inMoving:s,devicePoint:e})]}})})},ms);function ms(t){var e=t.element,n=void 0===e?null:e,i=t.clientPoint,o=void 0===i?null:i,r=t.screenPoint,s=void 0===r?null:r,l=t.isTarget,a=void 0!==l&&l,u=t.inMoving,c=void 0!==u&&u,h=t.devicePoint,f=void 0===h?null:h;this.element=n,this.clientPoint=o,this.screenPoint=s,this.devicePoint=f,this.isTarget=a,this.inMoving=c}var ps,vs=(t(gs,ps=hs),gs.prototype._getElementForEvent=function(n){return b(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return[4,v.position.containsOffset(this.element,this.options.offsetX,this.options.offsetY)];case 1:return e=t.sent()?this.element:null,[2,Ce(n.point,this.window,e)]}})})},gs.prototype._moveToElement=function(){return b(this,void 0,void 0,function(){var e,n=this;return S(this,function(t){switch(t.label){case 0:return e=new Nr(c.utils.extend({skipScrolling:!0},this.options),!1),[4,us.create(this.element,e,this.window,this.cursor)];case 1:return[2,t.sent().run().then(function(){return De(n.automationSettings.mouseActionStepDelay)})]}})})},gs.prototype._scrollToElement=function(){var e=this,n=!1,t=new xr(this.options,!1);return v.scroll(this.element,t).then(function(t){return n=t,De(e.automationSettings.mouseActionStepDelay)}).then(function(){return Ce(e.cursor.getPosition(),e.window)}).then(function(t){return v.ensureMouseEventAfterScroll(t,e.element,n)}).then(function(){return n})},gs.prototype._getElementOffset=function(){return b(this,void 0,void 0,function(){var e,n,i,o;return S(this,function(t){switch(t.label){case 0:return[4,Pe(this.element)];case 1:return e=t.sent(),n=this.options,i=n.offsetX,o=n.offsetY,i=i||0===i?i:e.offsetX,o=o||0===o?o:e.offsetY,[2,{offsetX:i,offsetY:o}]}})})},gs.prototype._wrapAction=function(p){return b(this,void 0,void 0,function(){var e,n,i,o,r,s,l,a,u,c,h,f,d,m;return S(this,function(t){switch(t.label){case 0:return[4,this._getElementOffset()];case 1:return e=t.sent(),n=e.offsetX,i=e.offsetY,[4,Se(this.element,{x:n,y:i})];case 2:return o=t.sent(),[4,v.position.getClientPosition(this.element)];case 3:return r=t.sent(),[4,p()];case 4:return t.sent(),[4,Se(this.element,{x:n,y:i})];case 5:return s=t.sent(),[4,v.position.getClientPosition(this.element)];case 6:return l=t.sent(),[4,function(i,o){return b(this,void 0,void 0,function(){var e,n;return S(this,function(t){switch(t.label){case 0:return[4,v.style.getElementScroll(i)];case 1:return e=t.sent(),[4,v.style.hasScroll(i)];case 2:return n=t.sent(),!/html/i.test(i.tagName)&&n&&(o.x-=e.left,o.y-=e.top),[2,v.position.offsetToClientCoords(o)]}})})}(this.element,s)];case 7:return a=t.sent(),[4,v.position.containsOffset(this.element,n,i)];case 8:return u=t.sent()?this.element:null,[4,Ce(a,this.window,u)];case 9:return(c=t.sent())?(h=!u||c===u||c===this.element)?[3,11]:[4,this._contains(this.element,c)]:[2,ds.create({element:null,clientPoint:null,screenPoint:null,isTarget:!1,inMoving:!1})];case 10:h=t.sent(),t.label=11;case 11:return f=o.x!==s.x||o.y!==s.y,d=r.x!==l.x||r.y!==l.y,m=f&&d,[2,ds.create({element:c,clientPoint:a,screenPoint:s,isTarget:h,inMoving:m})]}})})},gs._checkElementState=function(t,e){if(!t.element)throw new Error(Te.elementIsInvisibleError);if(e&&(!t.isTarget||t.inMoving))throw new Error(Te.foundElementIsNotTarget);return t},gs.prototype._ensureElement=function(e,n,i){var o=this;return void 0===n&&(n=!1),void 0===i&&(i=!1),this._wrapAction(function(){return o._scrollToElement()}).then(function(t){return gs._checkElementState(t,e)}).then(function(t){return i?t:o._wrapAction(function(){return o._moveToElement()})}).then(function(t){return n||gs._checkElementState(t,e),t}).then(function(t){return o.emit(o.TARGET_ELEMENT_FOUND_EVENT,{element:(null==t?void 0:t.element)||null}),{element:(null==t?void 0:t.element)||null,clientPoint:(null==t?void 0:t.clientPoint)||null,screenPoint:(null==t?void 0:t.screenPoint)||null,devicePoint:(null==t?void 0:t.devicePoint)||null}})},gs.prototype._contains=function(o,r){return b(this,void 0,void 0,function(){var e,n,i;return S(this,function(t){switch(t.label){case 0:return[4,Ee(r)];case 1:for(e=t.sent(),n=0,i=e;n<i.length;n++)if(i[n]===o)return[2,!0];return[2,!1]}})})},gs);function gs(t,e,n,i){var o=ps.call(this)||this;return o.TARGET_ELEMENT_FOUND_EVENT="automation|target-element-found-event",o.element=t,o.options=e,o.automationSettings=new Me(e.speed||1),o.window=n,o.cursor=i,v.automations._ensureWindowAndCursorForLegacyTests(o),o}var Es,ys=m.Promise,bs=(t(Ss,Es=vs),Ss.prototype.run=function(t){var e=this,n=ys.resolve();return this.element!==Pc.scrollingElement&&this.element!==Pc.documentElement&&(n=this._ensureElement(t,!0,!0)),n.then(function(){e.element.scrollLeft=e.scrollLeft,e.element.scrollTop=e.scrollTop})},Ss);function Ss(t,e,n){var i,o,r,s,l,a=e.x,u=e.y,c=e.position,h=e.byX,f=e.byY,d=Es.call(this,t,n,_c,zt)||this;return c&&(o=t,r=c,s=Math.floor(o.scrollWidth/2-o.clientWidth/2),l=Math.floor(o.scrollHeight/2-o.clientHeight/2),a=(i={top:[s,0],right:[o.scrollWidth,l],bottom:[s,o.scrollHeight],left:[0,l],topRight:[o.scrollWidth,0],topLeft:[0,0],bottomRight:[o.scrollWidth,o.scrollHeight],bottomLeft:[0,o.scrollHeight],center:[s,l]}[r])[0],u=i[1]),d.scrollLeft="number"==typeof a?a:t.scrollLeft,d.scrollTop="number"==typeof u?u:t.scrollTop,h&&(d.scrollLeft+=h),f&&(d.scrollTop+=f),d}var ws,_s=(t(Ps,ws=vs),Ps.prototype.run=function(t){return this._ensureElement(t,!0,!0)},Ps);function Ps(t,e){return ws.call(this,t,e,_c,zt)||this}var As,xs=(t(Cs,As=vs),Cs.prototype._mousedown=function(t){return this.strategy.mousedown(t)},Cs.prototype._mouseup=function(t,e){return this.strategy.mouseup(t,e)},Cs.prototype.run=function(t){var r,s=this;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint,i=t.screenPoint,o=t.devicePoint;return r={point:n,screenPoint:i,element:e,options:c.utils.extend({clientX:null==n?void 0:n.x,clientY:null==n?void 0:n.y,screenX:null==o?void 0:o.x,screenY:null==o?void 0:o.y},s.modifiers)},u.all([De(s.automationSettings.mouseActionStepDelay),s.cursor.leftButtonDown().then(function(){return s._mousedown(r)})])}).then(function(){return s.cursor.buttonUp()}).then(function(){return s._getElementForEvent(r)}).then(function(t){return t?s._mouseup(t,r):null})},Cs);function Cs(t,e,n,i){var o=As.call(this,t,e,n,i)||this;return o.modifiers=e.modifiers,o.strategy=v.automations.click.createMouseClickStrategy(o.element,e.caretPos),o}function Ts(t,e,n){var i=function(t,e,n){if(e.y-t.y==0)return 0;var i=(e.x-t.x)/(e.y-t.y),o=t.y*(t.x-e.x)/(e.y-t.y)+t.x;return Math.round(i*n+o)}(t,e,n.top);return i&&i>=n.left&&i<=n.right?new E(i,n.top):null}function Ms(t,e,n){var i=function(t,e,n){if(e.x===t.x)return 0;var i=(e.y-t.y)/(e.x-t.x),o=t.x*(t.y-e.y)/(e.x-t.x)+t.y;return Math.round(i*n+o)}(t,e,n.left);return i&&i>=n.top&&i<=n.bottom?new E(n.left,i):null}function Us(t,e,n){for(var i=[],o=0,r=[{left:n.left,top:n.top,right:n.left,bottom:n.bottom,isHorizontal:!1},{left:n.right,top:n.top,right:n.right,bottom:n.bottom,isHorizontal:!1},{left:n.left,top:n.top,right:n.right,bottom:n.top,isHorizontal:!0},{left:n.left,top:n.bottom,right:n.right,bottom:n.bottom,isHorizontal:!0}];o<r.length;o++){var s=r[o],l=(s.isHorizontal?Ts:Ms)(t,e,s);l&&i.push(l)}return i.length?1===i.length||i[0].distance(t)<i[1].distance(t)?i[0]:i[1]:null}var Ds=m.eventSandbox.eventSimulator,Is=m.eventSandbox.message,ks=y.positionUtils,Bs=y.domUtils,Os=y.styleUtils,Ns="automation|move|response";Is.on(Is.SERVICE_MSG_RECEIVED_EVENT,function(t){var e,n,i,o,r,s,l,a,u,c,h,f,d;"automation|move|request"===t.message.cmd&&(t.source.parent===_c?(n=new E((e=t).message.endX,e.message.endY),i=e.source,o=Bs.findIframeByWindow(i),r=Os.getBordersWidth(o),s=Os.getElementPadding(o),l=ks.getIframeClientCoordinates(o),a=ks.getIframePointRelativeToParentFrame(n,i),u=zt.getPosition(),c=ks.isInRectangle(u,l)?u:Us(u,a,l),h={x:c.x-l.left,y:c.y-l.top},f=new Nr({modifiers:e.message.modifiers,offsetX:h.x+r.left+s.left,offsetY:h.y+r.top+s.top,speed:e.message.speed,skipScrolling:!0},!1),d={cmd:Ns,x:h.x,y:h.y},zt.getActiveWindow(_c)!==i?us.create(o,f,_c,zt).then(function(t){return t.run()}).then(function(){zt.setActiveWindow(i),Is.sendServiceMsg(d,i)}):Is.sendServiceMsg(d,i)):(m.on(m.EVENTS.beforeUnload,function(){return Is.sendServiceMsg({cmd:Ns},t.source)}),function(t){var e=t.source,n={left:t.message.left,right:t.message.right,top:t.message.top,bottom:t.message.bottom};if(!t.message.iframeUnderCursor){var i=t.message,o=i.startX,r=i.startY,s=o-n.left,l=r-n.top,a=p();return a&&(Ds.mouseout(a,{clientX:s,clientY:l,relatedTarget:null}),Ds.mouseleave(a,{clientX:s,clientY:l,relatedTarget:null})),Is.sendServiceMsg({cmd:Ns},e)}var u,c=zt.getPosition(),h=Us(E.create(n).add(c),new E(t.message.endX,t.message.endY),n);h?(u=new Nr({modifiers:t.message.modifiers,offsetX:h.x-n.left,offsetY:h.y-n.top,speed:t.message.speed,skipScrolling:!0},!1),us.create(Pc.documentElement,u,_c,zt).then(function(t){return t.run()}).then(function(){var t={cmd:Ns,x:h.x,y:h.y};zt.setActiveWindow(e),Is.sendServiceMsg(t,e)})):Is.sendServiceMsg({cmd:Ns,x:n.left,y:n.top},e)}(t)))});var Fs=m.Promise,Ls=m.utils.browser,Ks=m.utils.featureDetection,Ys=m.eventSandbox.eventSimulator,Vs=m.eventSandbox.focusBlur,Rs=m.nativeMethods,Ws=y.domUtils,Xs=y.styleUtils,Hs=y.delay,qs=i.selectElement,Gs=Ks.isTouchDevice?0:160,zs=(js.prototype._calculateEventArguments=function(){var t=this.optionListExpanded?qs.getEmulatedChildElement(this.element):this.element,e=1<Xs.getSelectElementSize(this.parentSelect);return{options:this.modifiers,element:Ls.isIE&&e?this.parentSelect:t}},js.prototype._getMoveArguments=function(){var t,e,n=null,i=null,o=null;return o=this.optionListExpanded?(i=(t=_e(n=qs.getEmulatedChildElement(this.element))).offsetX,t.offsetY):(n=Pc.documentElement,i=(e=qs.getSelectChildCenter(this.element)).x,e.y),{element:n,offsetX:i,offsetY:o,speed:this.speed}},js.prototype._move=function(t){var e=this,n=t.element,i=t.offsetX,o=t.offsetY,r=t.speed,s=new Nr({offsetX:i,offsetY:o,speed:r,modifiers:this.modifiers},!1);return us.create(n,s,_c,zt).then(function(t){return t.run()}).then(function(){return Hs(e.automationSettings.mouseActionStepDelay)})},js.prototype._mousedown=function(){var t=this;return Ls.isFirefox?(Ys.mousedown(this.eventsArgs.element,this.eventsArgs.options),this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex),this._focus()):Ls.isIE?(Ys.mousedown(this.eventsArgs.element,this.eventsArgs.options),this._focus()):this._focus().then(function(){return Hs(Gs)}).then(function(){Ys.mousedown(t.eventsArgs.element,t.eventsArgs.options),t.clickCausesChange&&(t.parentSelect.selectedIndex=t.childIndex)})},js.prototype._focus=function(){var e=this;return new Fs(function(t){Vs.focus(e.parentSelect,t,!1,!0)})},js.prototype._mouseup=function(){var t=Ls.isIE?this.parentSelect:this.eventsArgs.element;Ys.mouseup(t,this.eventsArgs.options),Ls.isIE&&this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex);var e=Ls.isFirefox||Ls.isSafari||Ls.isChrome&&53<=Ls.version,n=e||Ls.isIE;return e&&this.clickCausesChange&&Ys.input(this.parentSelect),n&&this.clickCausesChange&&Ys.change(this.parentSelect),Fs.resolve()},js.prototype._click=function(){Ys.click(this.eventsArgs.element,this.eventsArgs.options)},js.prototype.run=function(){var t=this;if(!this.parentSelect)return Ys.click(this.eventsArgs.element,this.eventsArgs.options),Fs.resolve();this.optionListExpanded||qs.scrollOptionListByChild(this.element);var e=this._getMoveArguments();return this.eventsArgs=this._calculateEventArguments(),Xs.getSelectElementSize(this.parentSelect)<=1?this._move(e).then(function(){return t._click()}):this._move(e).then(function(){return t._mousedown()}).then(function(){return t._mouseup()}).then(function(){return t._click()})},js);function js(t,e){var n,i,o,r,s;this.element=t,this.modifiers=e.modifiers,this.caretPos=e.caretPos,this.offsetX=e.offsetX,this.offsetY=e.offsetY,this.speed=e.speed,this.automationSettings=new Me(e.speed),this.parentSelect=Ws.getSelectParent(this.element),this.optionListExpanded=!!this.parentSelect&&qs.isOptionListExpanded(this.parentSelect),this.childIndex=null,this.clickCausesChange=!1,this.parentSelect&&(n=Ws.isOptionElement(this.element),i=this.parentSelect.selectedIndex,this.childIndex=Ws.getElementIndexInParent(this.parentSelect,this.element),o=Rs.nodeParentNodeGetter.call(this.element),r=Ws.isOptionGroupElement(o)?o:null,s=this.element.disabled||r&&r.disabled,this.clickCausesChange=n&&!s&&this.childIndex!==i),this.eventsArgs={options:this.modifiers,element:this.element}}var $s,Zs=m.utils.featureDetection,Js=m.utils.browser,Qs=m.eventSandbox.eventSimulator,tl=y.eventUtils,el=y.delay,nl=Zs.isTouchDevice?0:160,il=(t(ol,$s=vs),ol.prototype._firstClick=function(t){var e=this,n=new kr(this.options);n.speed=1;var i=new xs(this.element,n,_c,zt);return i.on(i.TARGET_ELEMENT_FOUND_EVENT,function(t){return e.emit(e.TARGET_ELEMENT_FOUND_EVENT,t)}),i.run(t).then(function(t){return el(nl).then(function(){return t})})},ol.prototype._secondClick=function(t){var e=this;Js.isIE&&tl.bind(Pc,"focus",tl.preventDefault,!0);var n=new kr({offsetX:t.screenPoint.x,offsetY:t.screenPoint.y,caretPos:this.caretPos,modifiers:this.modifiers,speed:1}),i=new xs(Pc.documentElement,n,_c,zt);return i.run().then(function(t){return e.eventState.dblClickElement=i.strategy.eventState.clickElement,Js.isIE&&tl.unbind(Pc,"focus",tl.preventDefault,!0),t})},ol.prototype._dblClick=function(t){this.eventState.dblClickElement&&Qs.dblclick(this.eventState.dblClickElement,t.options)},ol.prototype.run=function(t){var e=this;return this._firstClick(t).then(function(t){return e._secondClick(t)}).then(function(t){return e._dblClick(t)})},ol);function ol(t,e){var n=$s.call(this,t,e,_c,zt)||this;return n.modifiers=e.modifiers,n.caretPos=e.caretPos,n.speed=e.speed,n.automationSettings=new Me(n.speed),n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.eventArgs=null,n.eventState={dblClickElement:null},n}var rl=m.utils.browser,sl=m.Promise,ll=m.nativeMethods,al=y.positionUtils,ul=y.domUtils;function cl(t,e){var n=null;return i.hide(e).then(function(){return al.getElementFromPoint(t)}).then(function(t){return n=t,i.show(e)}).then(function(){return n})}function hl(t,e,n){var i=al.getElementFromPoint(t,e),o=ul.containsElement(n,i)&&ll.nodeTextContentGetter.call(i).length;return i&&i===n||o?i:null}function fl(t,e){if(!e||!ul.isDomElement(e)||!t||t===e)return t;if("tref"===ul.getTagName(e))return e;var n,i,o,r="area"===ul.getTagName(e)&&ul.isImgElement(t);if(rl.isFirefox&&r)return n=t,i=e,(o=ul.closest(i,"map"))&&o.name===n.useMap.substring(1)?i:n;var s=ul.isAnchorElement(e)||ul.getParents(e,"a").length,l=s&&ul.containsElement(e,t)&&ll.nodeTextContentGetter.call(t).length;if(!s||l||!ll.nodeTextContentGetter.call(e).length)return t;var a=e.getBoundingClientRect();return hl(a.right-1,a.top+1,e)||hl(a.left+1,a.bottom-1,e)||t}function dl(i,o){return cl(i).then(function(t){var e=t,n=sl.resolve(t);return!e&&q(_c)&&0<i.x&&0<i.y&&(n=n.then(function(){return cl(i,!0)}).then(function(t){return t})),n.then(function(t){return fl(t,o)})})}var ml,pl=function(){this.enabled=!1,this.dropAllowed=!1,this.element=null,this.dataTransfer=null,this.dataStore=null},vl=m.nativeMethods,gl=m.utils.featureDetection,El=m.utils.html,yl=m.utils.url,bl=m.eventSandbox.DataTransfer,Sl=m.eventSandbox.DragDataStore,wl=y.eventUtils,_l=y.domUtils,Pl=(t(Al,ml=us),Al.create=function(o,r,s,l){return b(this,void 0,void 0,function(){var e,n,i;return S(this,function(t){switch(t.label){case 0:return[4,us.getTarget(o,s,new E(r.offsetX,r.offsetY))];case 1:return e=t.sent(),n=e.element,i=e.offset,[2,new Al(n,i,r,s,l)]}})})},Al.prototype._getCursorSpeed=function(){return this.automationSettings.draggingSpeed},Al.prototype._getEventSequenceOptions=function(t){var i=this;return ml.prototype._getEventSequenceOptions.call(this,t).then(function(t){var e=t.eventOptions,n=t.eventSequenceOptions;return e.dataTransfer=i.dragAndDropState.dataTransfer,e.buttons=wl.BUTTONS_PARAMETER.leftButton,n.holdLeftButton=!0,{eventOptions:e,eventSequenceOptions:n}})},Al.prototype._getCorrectedTopElement=function(t){return this.touchMode?this.dragElement:t},Al.prototype._runEventSequence=function(t,e){var n=e.eventOptions,i=e.eventSequenceOptions,o=R(this.dragAndDropState.enabled,this.firstMovingStepOccured,i).run(t,p(),n,this.dragElement,this.dragAndDropState.dataStore),r=o.dragAndDropMode,s=o.dropAllowed;this.dragAndDropState.enabled=r,this.dragAndDropState.dropAllowed=s},Al.prototype._needMoveCursorImmediately=function(){return!1},Al.prototype.run=function(){var l=this;return dl(this.cursor.getPosition()).then(function(t){l.dragElement=t;var e,n,i,o,r,s=function(t){for(var e=t;e;){if(e.draggable)return e;e=vl.nodeParentNodeGetter.call(e)}return null}(l.dragElement);return s&&gl.hasDataTransfer&&!l.skipDefaultDragBehavior&&(l.dragAndDropState.enabled=!0,l.dragElement=s,l.dragAndDropState.element=l.dragElement,l.dragAndDropState.dataStore=new Sl,l.dragAndDropState.dataTransfer=new bl(l.dragAndDropState.dataStore),((e=_l.isAnchorElement(l.dragElement))||_l.isImgElement(l.dragElement))&&(n=e?"href":"src",o=(i=yl.parseProxyUrl(l.dragElement[n]))?i.destUrl:l.dragElement[n],r=El.cleanUpHtml(vl.elementOuterHTMLGetter.call(l.dragElement)),l.dragAndDropState.dataTransfer.setData("text/plain",o),l.dragAndDropState.dataTransfer.setData("text/uri-list",o),l.dragAndDropState.dataTransfer.setData("text/html",r))),ml.prototype.run.call(l).then(function(){return l.dragAndDropState})})},Al);function Al(t,e,n,i,o){var r=ml.call(this,t,e,n,i,o)||this;return r.dragElement=null,r.dragAndDropState=new pl,r}var xl,Cl=m.Promise,Tl=m.utils.extend,Ml=m.utils.featureDetection,Ul=m.eventSandbox.eventSimulator,Dl=m.eventSandbox.focusBlur,Il=(t(kl,xl=vs),kl.prototype._getEndPoint=function(){throw new Error("Not implemented")},kl.prototype._mousedown=function(t){var e=this;return zt.leftButtonDown().then(function(){return e.simulateDefaultBehavior=Ul[e.downEvent](t.element,t.options),e._focus(t)})},kl.prototype._focus=function(n){var i=this;return new Cl(function(t){var e=g.domUtils.isContentEditableElement(i.element)?g.contentEditable.findContentEditableParent(i.element):n.element;Dl.focus(e,t,!1,!0)})},kl.prototype._getDestination=function(){throw new Error("Not implemented")},kl.prototype._drag=function(){return b(this,void 0,void 0,function(){var e,n,i,o,r,s=this;return S(this,function(t){switch(t.label){case 0:return[4,this._getDestination()];case 1:return e=t.sent(),n=e.element,i=e.offsets,o=e.endPoint,this.endPoint=o,r=new Nr({offsetX:i.offsetX,offsetY:i.offsetY,modifiers:this.modifiers,speed:this.speed,minMovingTime:25,skipDefaultDragBehavior:!1===this.simulateDefaultBehavior},!1),[2,Pl.create(n,r,_c,zt).then(function(t){return t.run()}).then(function(t){return s.dragAndDropState=t,g.delay(s.automationSettings.mouseActionStepDelay)})]}})})},kl.prototype._mouseup=function(){var o=this;return zt.buttonUp().then(function(){var e=g.positionUtils.offsetToClientCoords(o.endPoint),n=null,i=Tl({clientX:e.x,clientY:e.y},o.modifiers);return dl(e).then(function(t){return(n=t)?(o.dragAndDropState.enabled?(i.dataTransfer=o.dragAndDropState.dataTransfer,o.dragAndDropState.dropAllowed&&Ul.drop(n,i),Ul.dragend(o.dragAndDropState.element,i),o.dragAndDropState.dataStore.setProtectedMode()):Ul[o.upEvent](n,i),dl(e)):n}).then(function(t){n&&t===n&&!o.dragAndDropState.enabled&&Ul.click(n,i)})})},kl.prototype.run=function(t){var i,o=this;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint;return i={point:n,element:e,options:Tl({clientX:n.x,clientY:n.y},o.modifiers)},Cl.all([g.delay(o.automationSettings.mouseActionStepDelay),o._mousedown(i)])}).then(function(){return o._drag()}).then(function(){return o._mouseup()})},kl);function kl(t,e){var n=xl.call(this,t,e,_c,zt)||this;return n.modifiers=e.modifiers,n.speed=e.speed,n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.endPoint=null,n.simulateDefaultBehavior=!0,n.downEvent=Ml.isTouchDevice?"touchstart":"mousedown",n.upEvent=Ml.isTouchDevice?"touchend":"mouseup",n.dragAndDropState=null,n}var Bl,Ol=m.utils.browser,Nl=y.styleUtils,Fl=(t(Ll,Bl=Il),Ll.prototype._getDestination=function(){var t,e,n,i,o,r=(t=this.element,e=this.offsetX,n=this.offsetY,i=Ol.isFirefox?Math.ceil:Math.round,o=g.positionUtils.getOffsetPosition(t,i),{x:(t===Pc.documentElement?0:o.left)+e,y:(t===Pc.documentElement?0:o.top)+n}),s=Nl.getWidth(Pc),l=Nl.getHeight(Pc),a={x:r.x+this.dragOffsetX,y:r.y+this.dragOffsetY},a={x:Math.min(Math.max(0,a.x),s),y:Math.min(Math.max(0,a.y),l)};return{element:Pc.documentElement,offsets:{offsetX:a.x,offsetY:a.y},endPoint:a}},Ll);function Ll(t,e,n,i){var o=Bl.call(this,t,i)||this;return o.dragOffsetX=e,o.dragOffsetY=n,o}var Kl,Yl=y.positionUtils,Vl=(t(Rl,Kl=Il),Rl.prototype._getDestination=function(){return b(this,void 0,void 0,function(){var e,n,i,o;return S(this,function(t){switch(t.label){case 0:return e=this.destinationElement,n=Yl.getElementRectangle(e),[4,Pe(e,this.destinationOffsetX,this.destinationOffsetY)];case 1:return i=t.sent(),o={x:n.left+i.offsetX,y:n.top+i.offsetY},[2,{element:e,offsets:i,endPoint:o}]}})})},Rl);function Rl(t,e,n){var i=Kl.call(this,t,n)||this;return i.destinationElement=e,i.destinationOffsetX=n.destinationOffsetX,i.destinationOffsetY=n.destinationOffsetY,i}var Wl,Xl=(t(Hl,Wl=vs),Hl.prototype.run=function(t){return this._ensureElement(t,!0)},Hl);function Hl(t,e){return Wl.call(this,t,e,_c,zt)||this}var ql=m.utils.browser,Gl=m.sandbox.event,zl=m.eventSandbox.eventSimulator,jl=m.eventSandbox.listeners,$l=m.nativeMethods,Zl=y.domUtils,Jl=y.contentEditable,Ql=y.textSelection,ta=/ /g;function ea(t){var e=Ql.getSelectionByElement(t),n=Ql.hasInverseSelectionContentEditable(t);return Ql.hasElementContainsSelection(t)?Jl.getSelection(t,e,n):{startPos:Jl.calculateNodeAndOffsetByPosition(t,0),endPos:Jl.calculateNodeAndOffsetByPosition(t,0)}}function na(t){var e=t.startPos.node,n=t.startPos.offset,i=t.endPos.offset,o=Jl.getFirstNonWhitespaceSymbolIndex(e.nodeValue),r=Jl.getLastNonWhitespaceSymbolIndex(e.nodeValue);return n<o&&0!==n?(t.startPos.offset=o,t.endPos.offset=i+o-n):r<i&&i!==e.nodeValue.length&&(t.startPos.offset=e.nodeValue.length,t.endPos.offset=i+e.nodeValue.length-n),t}function ia(t,e,n){return!n||zl.beforeInput(t,e)}function oa(t,e){var n;function i(t){t.preventDefault(),n=!0}function o(t){"textInput"===t.type&&(n=!1)}ql.isSafari&&(jl.addInternalEventBeforeListener(_c,["textInput"],i),Gl.on(Gl.EVENT_PREVENTED_EVENT,o));var r=ql.isFirefox||zl.textInput(t,e)||n;return ql.isSafari&&(jl.removeInternalEventBeforeListener(_c,["textInput"],i),Gl.off(Gl.EVENT_PREVENTED_EVENT,o)),r||ql.isIE11}function ra(t,e){var n,i,o,r,s,l,a,u,c,h,f,d=ea(t),m=d.startPos.node,p=d.endPos.node,v=!0,g=!0,E=e;function y(){g=!1}function b(t,e,n){n()}e=e.replace(ta,String.fromCharCode(160)),m&&p&&Zl.isContentEditableElement(m)&&Zl.isContentEditableElement(p)&&(Zl.isTheSameNode(m,p)||(Ql.deleteSelectionContents(t),n=t,o=(i=d).startPos.node,r=$l.nodeParentNodeGetter.call(o)&&o.parentElement,!(ql.isChrome&&ql.version<58||ql.isSafari)&&r&&Zl.isElementContainsNode(n,o)||(i=ea(n),Ql.hasInverseSelectionContentEditable(n)&&(i={startPos:i.endPos,endPos:i.startPos})),i.endPos.offset=i.startPos.offset,m=(d=i).startPos.node),m&&Zl.isContentEditableElement(m)&&Zl.isRenderedNode(m)&&ia(t,e,ql.isChrome||ql.isFirefox)&&(v=oa(t,E),g=v&&!ql.isIE11,jl.addInternalEventBeforeListener(_c,["input"],y),jl.addInternalEventBeforeListener(_c,["textinput"],b),(v=v&&ia(t,e,ql.isSafari))&&(Zl.isElementNode(m)?(s=m,l=e,c=Pc.createTextNode(l),h={node:c,offset:l.length},f=$l.nodeParentNodeGetter.call(s),"br"===Zl.getTagName(s)?f.insertBefore(c,s):0<a?(u=$l.nodeChildNodesGetter.call(s),s.insertBefore(c,u[a])):s.appendChild(c),Ql.selectByNodesAndOffsets(h,h)):function(t,e,n){var i=e.startPos.node;Zl.isElementContainsNode(t,i)||(i=(e=na(ea(t))).startPos.node);var o=e.startPos.offset,r=e.endPos.offset,s=i.nodeValue,l={node:i,offset:o+n.length};i.nodeValue=s.substring(0,o)+n+s.substring(r,s.length),Ql.selectByNodesAndOffsets(l,l)}(t,na(d),e)),ut().then(function(){g&&zl.input(t,e),jl.removeInternalEventBeforeListener(_c,["input"],y),jl.removeInternalEventBeforeListener(_c,["textinput"],b)})))}function sa(t,e,n){var i,o,r,s,l,a,u,c,h,f,d,m,p;Zl.isContentEditableElement(t)&&ra(t,e),Zl.isElementReadOnly(t)||(Zl.isTextEditableElement(t)?(l=t,a=e,h=Zl.getElementValue(l),f=a.length,d=Ql.getSelectionStart(l),m=Ql.getSelectionEnd(l),p=Zl.isInputElement(l)&&"number"===l.type,ia(l,a,ql.isChrome||ql.isFirefox)&&oa(l,a)&&ia(l,a,ql.isSafari)&&((u=!ql.isIE&&p?null:parseInt(l.maxLength,10))<0&&(u=ql.isIE&&ql.version<17?0:null),c=h.substring(0,d)+a+h.substring(m,h.length),(null===u||isNaN(u)||c.length<=u)&&(p&&ql.isIOS&&"."===h[h.length-1]&&(d+=1),Zl.setElementValue(l,c),Ql.select(l,d+f,d+f)),zl.input(l,a))):Zl.isInputElement(t)&&(i=t,o=e,null!==(r=n)?(s=Zl.getElementValue(i),Zl.setElementValue(i,s.substr(0,r)+o+s.substr(r+o.length))):Zl.setElementValue(i,o),zl.change(i),zl.input(i,o)))}function la(t){return 1===t.length&&("a"<=t&&t<="z"||"A"<=t&&t<="Z")}var aa=m.nativeMethods,ua=m.utils.browser,ca=m.eventSandbox.focusBlur,ha=m.Promise,fa=g.domUtils.isRadioButtonElement,da=g.domUtils.getActiveElement,ma=g.domUtils.getTabIndexAttributeIntValue;function pa(t){return t===t.toLowerCase()?t.toUpperCase():t.toLowerCase()}function va(t){var e=da(t||Pc),n=null;if(e&&g.domUtils.isIframeElement(e)&&aa.contentDocumentGetter.call(e))try{n=va(aa.contentDocumentGetter.call(e))}catch(t){}return n||e}function ga(t,e,n){if(!fa(e))return t;if(!n&&!e.name&&!ua.isChrome)return[e];var i,o,r=(i=e,o=null,n?""===i.name||ua.isFirefox||(o=function(t){return!t.name||t===i||t.name!==i.name}):""!==i.name?o=function(t){return fa(t)&&t.name===i.name}:ua.isChrome&&(o=function(t){return fa(t)&&!t.name}),o);return r&&(t=g.arrayUtils.filter(t,r)),t}function Ea(t,e,n){var i,o,r,s,l,a,u,c,h=e?-1:1,f=g.domUtils.getTopSameDomainWindow(_c).document,d=(i=f,o=aa.documentActiveElementGetter.call(i),r=o&&ma(o),!(o&&r<0)),m=ga(m=g.domUtils.getFocusableElements(f,d),t,n),p=fa(t),v=g.arrayUtils.indexOf(m,t);return(e?0===v:v===m.length-1)?!e&&t.tabIndex<0?g.arrayUtils.find(m,function(t){return 0===t.tabIndex}):n||!p?Pc.body:m[m.length-1-v]:e&&-1===v?m[m.length-1]:(l=(s=m)[v+h],a=n,u=fa(l)&&l.name&&!l.checked,c=null,a&&u&&(c=g.arrayUtils.find(s,function(t){return fa(t)&&t.name===l.name&&t.checked})),c||l)}function ya(t){if(la(t))return t.toUpperCase().charCodeAt(0);var e=g.KEY_MAPS.shiftMap[t]?g.KEY_MAPS.shiftMap[t].charCodeAt(0):t.charCodeAt(0);return g.KEY_MAPS.symbolCharCodeToKeyCode[e]||e}var ba={SPECIAL_KEYS:{capslock:"CapsLock",delete:"U+007F",end:"End",enter:"Enter",esc:"U+001B",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:"U+0020",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},LETTERS:{a:"U+0041",b:"U+0042",c:"U+0043",d:"U+0044",e:"U+0045",f:"U+0046",g:"U+0047",h:"U+0048",i:"U+0049",j:"U+004A",k:"U+004B",l:"U+004C",m:"U+004D",n:"U+004E",o:"U+004F",p:"U+0050",q:"U+0051",r:"U+0052",s:"U+0053",t:"U+0054",u:"U+0055",v:"U+0056",w:"U+0057",x:"U+0058",y:"U+0059",z:"U+005A"},SYMBOLS:{0:"U+0030",1:"U+0031",2:"U+0032",3:"U+0033",4:"U+0034",5:"U+0035",6:"U+0036",7:"U+0037",8:"U+0038",9:"U+0039"," ":"U+0020","!":"U+0021","@":"U+0040","#":"U+0023",$:"U+0024","%":"U+0025","^":"U+005E","*":"U+002A","(":"U+0028",")":"U+0029",_:"U+005F","|":"U+007C","\\":"U+005C","/":"U+002F","?":"U+003F",".":"U+002E",",":"U+002C","<":"U+003C",">":"U+003E","[":"U+005B","]":"U+005D","{":"U+007B","}":"U+007D","§":"U+00A7","±":"U+00B1","'":"U+0027",'"':"U+0022",":":"U+003A",";":"U+003B","`":"U+0060","~":"U+007E"}};function Sa(t){return la(t)?ba.LETTERS[t.toLowerCase()]:ba.SYMBOLS[t]||ba.SPECIAL_KEYS[t]||t}function wa(t,e,n){var i={};return"keyIdentifier"in KeyboardEvent.prototype&&(i.keyIdentifier=t?"":n),"key"in KeyboardEvent.prototype&&(i.key=e),i}var _a=m.utils.browser,Pa=m.utils.extend,Aa=m.eventSandbox.eventSimulator,xa=(Ca._isKeyActivatedInputElement=function(t){return g.domUtils.isInputElement(t)&&/button|submit|reset|radio|checkbox/.test(t.type)},Ca.prototype._type=function(t,e){var n,i=t!==this.storedActiveElement,o=!i,r=t,s=g.domUtils.isEditableElement(t),l=g.domUtils.isEditableElement(this.storedActiveElement);try{i&&(n=g.domUtils.isElementInIframe(t)===g.domUtils.isElementInIframe(this.storedActiveElement)||l,o=(!_a.isFirefox||l)&&(!_a.isWebKit||n))}catch(t){}o&&(!_a.isIE&&i&&l&&s&&(r=this.storedActiveElement),sa(r,e))},Ca.prototype._addKeyPropertyToEventOptions=function(t){return Pa(t,wa("keypress"===t.type,this.keyProperty,this.keyIdentifierProperty)),t},Ca.prototype.down=function(t){this.storedActiveElement=va(this.topSameDomainDocument),this.modifierKeyCode&&(t[this.sanitizedKey]=!0),t.shift&&this.isLetter&&(this.keyProperty=pa(this.keyProperty));var e={keyCode:this.keyCode,type:"keydown"};return this._addKeyPropertyToEventOptions(e),Aa.keydown(this.storedActiveElement,Pa(e,t))},Ca.prototype.press=function(t){if(!this.isChar&&!this.specialKeyCode)return!0;var e=va(this.topSameDomainDocument),n=this.isChar?function(t,e){if("space"===t)return" ";if(e){if(la(t))return pa(t);if(g.KEY_MAPS.reversedShiftMap[t])return g.KEY_MAPS.reversedShiftMap[t]}return t}(this.sanitizedKey,t.shift):null,i=this.specialKeyCode||n.charCodeAt(0),o=e!==this.storedActiveElement;if(_a.isWebKit&&o&&g.domUtils.isElementInIframe(e)!==g.domUtils.isElementInIframe(this.storedActiveElement))return!0;this.storedActiveElement=e;var r={keyCode:i,charCode:i,type:"keypress"};this._addKeyPropertyToEventOptions(r);var s=_a.isAndroid||Aa.keypress(e,Pa(r,t));if(!s)return s;e=va(this.topSameDomainDocument),!n||t.ctrl||t.alt||this._type(e,n);var l=Ca._isKeyActivatedInputElement(e),a=g.domUtils.isButtonElement(e),u=_a.isSafari&&0<=_a.compareVersions([_a.webkitVersion,"603.1.30"]),c=_a.isFirefox&&l;return _a.isFirefox&&!c||u||!l&&!a||"enter"!==this.sanitizedKey||e.click(),s},Ca.prototype.up=function(t){this.modifierKeyCode&&(t[this.sanitizedKey]=!1);var e={keyCode:this.keyCode,type:"keyup"};this._addKeyPropertyToEventOptions(e);var n=Aa.keyup(va(this.topSameDomainDocument),Pa(e,t)),i=va(this.topSameDomainDocument);return!_a.isFirefox&&!_a.isSafari&&(!_a.isChrome||53<=_a.version)&&n&&"space"===this.sanitizedKey&&Ca._isKeyActivatedInputElement(i)&&i.click(),n},Object.defineProperty(Ca.prototype,"key",{get:function(){return this.sanitizedKey},enumerable:!1,configurable:!0}),Ca);function Ca(t,e){this.isLetter=la(t),this.isChar=1===t.length||"space"===t,this.sanitizedKey=g.getSanitizedKey(t),this.modifierKeyCode=g.KEY_MAPS.modifiers[this.sanitizedKey],this.specialKeyCode=g.KEY_MAPS.specialKeys[this.sanitizedKey],this.keyCode=null,this.keyIdentifierProperty=Sa(e),this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(_c).document,this.keyProperty=g.KEY_MAPS.keyProperty[e]||e,this.isChar&&"space"!==t?this.keyCode=ya(this.sanitizedKey):this.modifierKeyCode?this.keyCode=this.modifierKeyCode:this.specialKeyCode&&(this.keyCode=this.specialKeyCode),this.storedActiveElement=null}var Ta,Ma={ctrlA:"ctrl+a",backspace:"backspace",delete:"delete",left:"left",right:"right",up:"up",down:"down",shiftLeft:"shift+left",shiftRight:"shift+right",shiftUp:"shift+up",shiftDown:"shift+down",shiftHome:"shift+home",shiftEnd:"shift+end",home:"home",end:"end",enter:"enter",tab:"tab",shiftTab:"shift+tab",esc:"esc"},Ua=m.Promise,Da=m.utils.browser,Ia=m.eventSandbox.eventSimulator,ka=m.eventSandbox.elementEditingWatcher,Ba=y.textSelection,Oa=y.eventUtils,Na=y.domUtils,Fa=i.selectElement,La=null,Ka=null;function Ya(){Ka=La=null,Oa.unbind(this,"blur",Ya,!0)}function Va(t){var e,n,i,o;Na.isTextAreaElement(t)&&(La!==t&&(Oa.bind(t,"blur",Ya,!0),La=t),e=t,n=Ba.hasInverseSelection(e),i=Na.getTextAreaValue(e),o=n?Ba.getSelectionStart(e):Ba.getSelectionEnd(e),Ka=i&&o?Na.getTextareaIndentInLine(e,o):0)}function Ra(t,e){var n,i,o,r,s,l,a=Na.getTextAreaValue(t);a&&(n=Ba.getSelectionStart(t),i=Ba.getSelectionEnd(t),o=Ba.hasInverseSelection(t),s=(r=a.substring(0,o?n:i)).lastIndexOf("\n"),l=r.substring(0,s),null!==Ka&&La===t||Va(t),s=l.lastIndexOf("\n"),Xa(t,n,i,o,Math.min(s+1+Ka,l.length),e))}function Wa(t,e){var n,i,o,r,s,l,a,u,c,h,f=Na.getTextAreaValue(t);f&&(n=Ba.getSelectionStart(t),i=Ba.getSelectionEnd(t),u=(r=(o=Ba.hasInverseSelection(t))?n:i)+(l=-1===(c=(s=f.substring(r)).indexOf("\n"))?s.length:c+1),h=-1===(c=(a=s.substring(l)).indexOf("\n"))?a.length:c,null!==Ka&&La===t||Va(t),Xa(t,n,i,o,u=Math.min(u+Ka,u+h),e))}function Xa(t,e,n,i,o,r){var s=null,l=null,l=r?(s=e!==n&&i?n:e,o):s=o;Ba.select(t,s,l)}function Ha(t,e,n){Na.isInputElement(t)&&"number"===t.type&&("-"===e.charAt(0)&&"."===e.charAt(1)&&(e=e.substring(1)),"."===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1))),Na.setElementValue(t,e),Ba.select(t,n,n),Ia.input(t)}function qa(t,e){var n,i,o,r,s,l,a,u;return Na.isTextEditableElement(t)&&(n=Ba.getSelectionStart(t),i=Ba.getSelectionEnd(t),o=Ba.hasInverseSelection(t),s=null,s=(r=!Na.isTextAreaElement(t)||Na.getTextareaLineNumberByPosition(t,n)===Na.getTextareaLineNumberByPosition(t,i))?o?i:n:o?n:i,a=-1===(l=Na.getElementValue(t).substring(0,s).lastIndexOf("\n"))?0:l+1,u=null,r?(u=e?s:a,Ba.select(t,u,a)):o?Ba.select(t,i,a):Ba.select(t,n,a)),Ua.resolve()}function Ga(t,e){var n,i,o,r,s,l,a,u,c;return Na.isTextEditableElement(t)&&(n=Ba.getSelectionStart(t),i=Ba.getSelectionEnd(t),o=Ba.hasInverseSelection(t),s=null,u=s=(r=!Na.isTextAreaElement(t)||Na.getTextareaLineNumberByPosition(t,n)===Na.getTextareaLineNumberByPosition(t,i))?o?i:n:o?n:i,c=null,u+=-1===(a=(l=Na.getElementValue(t).substring(s)).indexOf("\n"))?l.length:a,r?(c=e?s:u,Ba.select(t,c,u)):o?Ba.select(t,i,u):Ba.select(t,n,u)),Ua.resolve()}function za(t){return qa(t,!0)}function ja(t){return Ga(t,!0)}function $a(t){return Na.isRadioButtonElement(t)&&!Da.isFirefox}function Za(t,e){return Ja(t,e,!1).then(function(t){t&&(t.checked=!0)})}function Ja(t,e,n){return void 0===n&&(n=!0),t?(Na.isSelectElement(t)&&Fa.collapseOptionList(),i=t,o=e,r=n,new ha(function(t){var e=Ea(i,o,r);e?ca.focus(e,function(){return t(e)}):t()}).then(function(t){return t&&Na.isTextEditableInput(t)&&Ba.select(t),t})):Ua.resolve();var i,o,r}var Qa=((Ta={})[Ma.ctrlA]=function(t){return Na.isEditableElement(t)&&Ba.select(t),Ua.resolve()},Ta[Ma.backspace]=function(t){var e,n,i;return Na.isTextEditableElementAndEditingAllowed(t)&&(e=Ba.getSelectionStart(t),n=Ba.getSelectionEnd(t),i=Na.getElementValue(t).replace(/\r\n/g,"\n"),n===e?0<e&&Ha(t,i.substring(0,e-1)+i.substring(n,i.length),e-1):Ha(t,i.substring(0,e)+i.substring(n,i.length),e)),Na.isContentEditableElement(t)&&Ba.deleteSelectionContents(t),Ua.resolve()},Ta[Ma.delete]=function(t){var e,n,i;return Na.isTextEditableElementAndEditingAllowed(t)&&(e=Ba.getSelectionStart(t),n=Ba.getSelectionEnd(t),i=Na.getElementValue(t).replace(/\r\n/g,"\n"),n===e?e<i.length&&Ha(t,i.substring(0,e)+i.substring(n+1,i.length),e):Ha(t,i.substring(0,e)+i.substring(n,i.length),e)),Na.isContentEditableElement(t)&&Ba.deleteSelectionContents(t),Ua.resolve()},Ta[Ma.left]=function(t){var e,n,i,o,r=null;return Na.isSelectElement(t)&&Fa.switchOptionsByKeys(t,"left"),$a(t)?Za(t,!0):(Na.isTextEditableElement(t)&&(e=(r=Ba.getSelectionStart(t)||0)===Ba.getSelectionEnd(t)?r-1:r,Ba.select(t,e,e),Va(t)),Na.isContentEditableElement(t)&&(r=Ba.getSelectionStart(t))!==Ba.getSelectionEnd(t)&&(n=Ba.getSelectionByElement(t),o={node:(i=Ba.hasInverseSelectionContentEditable(t))?n.focusNode:n.anchorNode,offset:i?n.focusOffset:n.anchorOffset},Ba.selectByNodesAndOffsets(o,o,!0)),Ua.resolve())},Ta[Ma.right]=function(t){var e,n,i,o,r=null,s=null;return Na.isSelectElement(t)&&Fa.switchOptionsByKeys(t,"right"),$a(t)?Za(t,!1):(Na.isTextEditableElement(t)&&(e=(r=Ba.getSelectionStart(t))===(s=Ba.getSelectionEnd(t))?s+1:s,r===Na.getElementValue(t).length&&(e=r),Ba.select(t,e,e),Va(t)),Na.isContentEditableElement(t)&&(r=Ba.getSelectionStart(t))!==(s=Ba.getSelectionEnd(t))&&(n=Ba.getSelectionByElement(t),o={node:(i=Ba.hasInverseSelectionContentEditable(t))?n.anchorNode:n.focusNode,offset:i?n.anchorOffset:n.focusOffset},Ba.selectByNodesAndOffsets(o,o,!0)),Ua.resolve())},Ta[Ma.up]=function(t){return Na.isSelectElement(t)&&Fa.switchOptionsByKeys(t,"up"),$a(t)?Za(t,!0):Da.isWebKit&&Na.isInputElement(t)?qa(t):(Na.isTextAreaElement(t)&&Ra(t,!1),Ua.resolve())},Ta[Ma.down]=function(t){return Na.isSelectElement(t)&&Fa.switchOptionsByKeys(t,"down"),$a(t)?Za(t,!1):Da.isWebKit&&Na.isInputElement(t)?Ga(t):(Na.isTextAreaElement(t)&&Wa(t,!1),Ua.resolve())},Ta[Ma.shiftLeft]=function(t){var e,n;return Na.isTextEditableElement(t)&&((e=Ba.getSelectionStart(t))===(n=Ba.getSelectionEnd(t))||Ba.hasInverseSelection(t)?Ba.select(t,n,Math.max(e-1,0)):Ba.select(t,e,Math.max(n-1,0)),Va(t)),Ua.resolve()},Ta[Ma.shiftRight]=function(t){var e,n,i;return Na.isTextEditableElement(t)&&(e=Ba.getSelectionStart(t),n=Ba.getSelectionEnd(t),i=Na.getElementValue(t).length,e!==n&&Ba.hasInverseSelection(t)?Ba.select(t,n,Math.min(e+1,i)):Ba.select(t,e,Math.min(n+1,i)),Va(t)),Ua.resolve()},Ta[Ma.shiftUp]=function(t){return Da.isWebKit&&Na.isInputElement(t)?za(t):(Na.isTextAreaElement(t)&&Ra(t,!0),Ua.resolve())},Ta[Ma.shiftDown]=function(t){return Da.isWebKit&&Na.isInputElement(t)?ja(t):(Na.isTextAreaElement(t)&&Wa(t,!0),Ua.resolve())},Ta[Ma.shiftHome]=za,Ta[Ma.shiftEnd]=ja,Ta[Ma.home]=qa,Ta[Ma.end]=Ga,Ta[Ma.enter]=function(t){var e,n,i,o,r,s;return Na.isSelectElement(t)&&Fa.collapseOptionList(),Na.isInputElement(t)?(Da.isIE||ka.processElementChanging(t),(e=Na.getParents(t,"form")[0])&&function(t,e){var n=t.querySelectorAll("input, button"),i=null,o=null;for(o=0;o<n.length;o++)if(!i&&"submit"===n[o].type&&!n[o].disabled){i=n[o];break}if(i)Ia.click(i);else if(Na.blocksImplicitSubmission(e)){for(var r=t.getElementsByTagName("input"),s=[],o=0;o<r.length;o++)Na.blocksImplicitSubmission(r[o])&&s.push(r[o]);1===s.length&&s[0]===e&&e.validity.valid&&Ia.submit(t)&&t.submit()}}(e,t)):Na.isTextAreaElement(t)?(n=Ba.getSelectionStart(t),o=(i=Na.getTextAreaValue(t)).substring(0,n),r=i.substring(n),s=n+1,Ha(t,o+String.fromCharCode(10)+r,s)):t.tagName&&Na.isAnchorElement(t)&&Ia.click(t),Ua.resolve()},Ta[Ma.tab]=function(t){return Ja(t,!1)},Ta[Ma.shiftTab]=function(t){return Ja(t,!0)},Ta[Ma.esc]=function(t){return Na.isSelectElement(t)&&Fa.collapseOptionList(),Ua.resolve()},Ta),tu=m.Promise,eu=m.utils.browser,nu=m.eventSandbox.message,iu=m.nativeMethods,ou="automation|press|request",ru="automation|press|response";nu.on(nu.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===ou&&(m.on(m.EVENTS.beforeUnload,function(){return nu.sendServiceMsg({cmd:ru},t.source)}),new su(t.message.keyCombinations,t.message.options).run().then(function(){return nu.sendServiceMsg({cmd:ru},t.source)}))});var su=(lu._getKeyPressSimulators=function(t){var e=function(t){for(var e=t.slice(),n=0;n<t.length;n++){var i=t[n];if("shift"===i.toLowerCase()){var o=t[n+1];if(!o)continue;g.KEY_MAPS.shiftMap[o]?t[n+1]=g.KEY_MAPS.shiftMap[o]:g.KEY_MAPS.reversedShiftMap[o]&&(e[n+1]=g.KEY_MAPS.reversedShiftMap[o])}!g.KEY_MAPS.shiftMap[i]||t[n-1]&&"shift"===t[n-1].toLowerCase()||(t[n]=g.KEY_MAPS.shiftMap[i],t.splice(n,0,"shift"),e.splice(n,0,"shift"),n++)}return{actualKeys:t,eventKeyProperties:e}}(g.getKeyArray(t)),n=e.actualKeys,i=e.eventKeyProperties;return g.arrayUtils.map(n,function(t,e){return new xa(t,i[e])})},lu._getShortcuts=function(t){for(var e=g.getKeyArray(t.toLowerCase()),n=[],i=[],o=[],r=0;r<e.length;r++)for(i.push(e[r]),o=i.slice();o.length;){var s=o.join("+");Qa[s]?(n.push(s),i=o=[]):o.shift()}return n},lu._getShortcutHandlers=function(t){for(var e,n,i,o=lu._getShortcuts(t.toLowerCase()),r={},s="",l=0;l<o.length;l++)e=o[l],n=t.indexOf(e),i=e.length,r[s+=t.substring(0,n+i)]=Qa[e],t=t.substring(n+i);return r},lu.prototype._down=function(t){this.pressedKeyString+=(this.pressedKeyString?"+":"")+t.key;var e=!t.down(this.modifiersState);return tu.resolve(e)},lu.prototype._press=function(t,e){var n=this;if(e&&!this.isSelectElement)return g.delay(this.automationSettings.keyActionStepDelay);var i=this.shortcutHandlers[this.pressedKeyString],o=!1;return i&&!eu.isFirefox&&"enter"!==t.key||(o=!t.press(this.modifiersState)),o&&!this.isSelectElement||!i?g.delay(this.automationSettings.keyActionStepDelay):i(va(this.topSameDomainDocument)).then(function(){return g.delay(n.automationSettings.keyActionStepDelay)})},lu.prototype._up=function(t){return t.up(this.modifiersState),g.delay(this.automationSettings.keyActionStepDelay)},lu.prototype._runCombination=function(t){var n=this;this.modifiersState={ctrl:!1,alt:!1,shift:!1,meta:!1},this.isSelectElement=g.domUtils.isSelectElement(va(this.topSameDomainDocument)),this.pressedKeyString="",this.shortcutHandlers=lu._getShortcutHandlers(t);var e=lu._getKeyPressSimulators(t);return g.promiseUtils.each(e,function(e){return n._down(e).then(function(t){return n._press(e,t)})}).then(function(){return g.arrayUtils.reverse(e),g.promiseUtils.each(e,function(t){return n._up(t)})})},lu.prototype.run=function(){var e=this,t=g.domUtils.getActiveElement(),n=g.domUtils.isIframeElement(t);if(!q(_c)&&n&&iu.contentWindowGetter.call(t)){var i={cmd:ou,keyCombinations:this.keyCombinations,options:this.options};return g.sendRequestToFrame(i,ru,iu.contentWindowGetter.call(t))}return g.promiseUtils.each(this.keyCombinations,function(t){return e._runCombination(t).then(function(){return g.delay(e.automationSettings.keyActionStepDelay)})})},lu);function lu(t,e){this.keyCombinations=t,this.isSelectElement=!1,this.pressedKeyString="",this.modifiersState=null,this.shortcutHandlers=null,this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(_c).document,this.automationSettings=new Me(e.speed),this.options=e}var au,uu=m.Promise,cu=m.utils.extend,hu=m.utils.browser,fu=m.eventSandbox.eventSimulator,du=y.domUtils,mu=y.eventUtils,pu=y.delay,vu=(t(gu,au=vs),gu.prototype._mousedown=function(t){var e=this;return zt.rightButtonDown().then(function(){return e.eventState.activeElementBeforeMouseDown=du.getActiveElement(),e.eventState.simulateDefaultBehavior=fu.mousedown(t.element,t.options),e._focus(t)})},gu.prototype._focus=function(t){return!1===this.simulateDefaultBehavior?ut():ot(du.isContentEditableElement(this.element)?this.element:t.element,!hu.isIE||this.eventState.activeElementBeforeMouseDown===du.getActiveElement(),this.caretPos).then(ut)},gu.prototype._mouseup=function(e){var t=this;return zt.buttonUp().then(function(){return t._getElementForEvent(e)}).then(function(t){return fu.mouseup(t,e.options)})},gu.prototype._contextmenu=function(e){return this._getElementForEvent(e).then(function(t){fu.contextmenu(t,e.options),du.isElementFocusable(t)||st(t)})},gu.prototype.run=function(t){var o=this,r=null;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint,i=t.devicePoint;return r={point:n,element:e,options:cu({clientX:n.x,clientY:n.y,screenX:i.x,screenY:i.y,button:mu.BUTTON.right},o.modifiers)},uu.all([pu(o.automationSettings.mouseActionStepDelay),o._mousedown(r)])}).then(function(){return o._mouseup(r)}).then(function(){return o._contextmenu(r)})},gu);function gu(t,e){var n=au.call(this,t,e,_c,zt)||this;return n.modifiers=e.modifiers,n.caretPos=e.caretPos,n.eventState={simulateDefaultBehavior:!0,activeElementBeforeMouseDown:null},n}var Eu=m.utils.browser,yu=y.domUtils,bu=y.positionUtils,Su=y.styleUtils,wu=y.contentEditable,_u=y.arrayUtils,Pu=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing","padding-top","padding-left","padding-right","padding-bottom","margin-top","margin-left","margin-right","margin-bottom","border-top-width","border-left-width","border-right-width","border-bottom-width"];function Au(t,e){var n,i,o,r,s,l=Su.getBordersWidth(t),a=bu.getOffsetPosition(t),u=t.scrollHeight||t.getBoundingClientRect().height,c=Math.ceil(e.left),h=Math.ceil(e.top),f=Math.floor(e.bottom);return yu.isTextAreaElement(t)||(i=(n=bu.offsetToClientCoords({x:a.left,y:a.top})).x+l.left+1,o=n.y+l.top+1,r=n.y+l.top+l.bottom+u,s=n.y+l.top+u-1,c=Math.ceil(c<=n.x?i:e.left),h=Math.ceil(h<=n.y?o:e.top),f=Math.floor(r<=f?s:e.bottom)),{left:c,top:h,bottom:f}}function xu(t){var e=Su.getElementScroll(Pc);return{left:t.left+e.left,top:t.top+e.top,bottom:t.bottom+e.top}}function Cu(t,e){var n=t.getBoundingClientRect(),i=function(e){var t,n,i,o=Pc.body,r=bu.getOffsetPosition(e),s=Su.getElementMargin(e),l=r.top-s.top,a=r.left-s.left,u=Pc.createElement("div"),c="white-space:pre-wrap;border-style:solid;";return"absolute"===Su.get(o,"position")&&(t=Su.getElementMargin(o),n=Su.get(o,"left"),i=Su.get(o,"top"),a-=t.left+(parseInt(n.replace("px",""),10)||0),l-=t.top+(parseInt(i.replace("px",""),10)||0)),_u.forEach(Pu,function(t){c+=t+":"+Su.get(e,t)+";"}),Su.set(u,{cssText:c,position:"absolute",left:a+"px",top:l+"px",width:e.scrollWidth+"px",height:e.scrollHeight+"px"}),m.nativeMethods.nodeTextContentSetter.call(u,yu.getElementValue(e)+" "),o.appendChild(u),u}(t),o=null,r=t.getBoundingClientRect(),s=r.top-n.top,l=r.left-n.left,a=yu.getElementValue(t).length;try{var u=Pc.createRange();u.setStart(m.nativeMethods.nodeFirstChildGetter.call(i),Math.min(e,a)),u.setEnd(m.nativeMethods.nodeFirstChildGetter.call(i),Math.min(e+1,a+1)),yu.isTextAreaElement(t)&&(0!==(o=u.getBoundingClientRect()).width||0!==o.height)||(o=u.getClientRects()[0])}catch(t){o=null}return yu.remove(i),o?{width:o.width,height:o.height,top:o.top-s,bottom:o.bottom-s,left:o.left-l,right:o.right-l}:null}function Tu(t,e){var n,i,o,r,s,l,a=null;return(a=yu.isContentEditableElement(t)?(o=t,r=e,s=yu.findDocument(o).createRange(),l=wu.calculateNodeAndOffsetByPosition(o,r),s.setStart(l.node,Math.min(l.offset,l.node.length)),s.setEnd(l.node,Math.min(l.offset,l.node.length)),s.getClientRects()[0]):"function"==typeof t.createTextRange?(n=e,(i=t.createTextRange()).collapse(!0),i.moveStart("character",n),i.moveEnd("character",n),i.collapse(!0),i.getBoundingClientRect()):Cu(t,e))?{x:(a=xu(a=Au(t,a))).left,y:Math.floor(a.top+(a.bottom-a.top)/2)}:null}function Mu(t,e){var n=yu.isTextEditableElement(t),i=yu.isContentEditableElement(t);return n&&0<yu.getElementValue(t).length||i&&wu.getContentEditableValue(t).length?Tu(t,e):bu.findCenter(t)}function Uu(t,e,n){var i=yu.findDocument(t).createRange();i.setStart(e,Math.min(n,e.length)),i.setEnd(e,Math.min(n,e.length));var o=i.getClientRects()[0];return o?{x:(o=xu(Au(t,o))).left,y:Math.floor(o.top+(o.bottom-o.top)/2)}:null}var Du,Iu=m.Promise,ku=m.utils.browser,Bu=m.utils.featureDetection,Ou=m.eventSandbox.eventSimulator,Nu=m.eventSandbox.focusBlur,Fu=y.contentEditable,Lu=y.domUtils,Ku=y.positionUtils,Yu=y.eventUtils,Vu=y.delay,Ru=(t(Wu,Du=vs),Wu._calculateEventArguments=function(t){var e=Ku.offsetToClientCoords(t);return dl(e).then(function(t){if(!t)throw new Error(Te.elementIsInvisibleError);return{element:t,options:{clientX:e.x,clientY:e.y}}})},Wu.prototype._move=function(t){var e=this,n=t.element,i=t.offsetX,o=t.offsetY,r=t.speed,s=new Nr({offsetX:i,offsetY:o,speed:r},!1);return us.create(n,s,_c,zt).then(function(t){return t.run()}).then(function(){return Vu(e.automationSettings.mouseActionStepDelay)})},Wu.prototype._bindMousedownHandler=function(){var e=this,n=function(t){e.eventState.mousedownPrevented=t.defaultPrevented,Yu.preventDefault(t),Yu.unbind(e.element,"mousedown",n)};Yu.bind(this.element,"mousedown",n)},Wu.prototype._calculateAbsoluteStartPoint=function(){throw new Error("Not implemented")},Wu.prototype._calculateAbsoluteEndPoint=function(){throw new Error("Not implemented")},Wu.prototype._moveToPoint=function(t){!function(t,e){if(yu.isEditableElement(t)){var n=yu.isTextAreaElement(t);if(!yu.isInputElement(t)||!(Eu.isFirefox||Eu.isIE&&10<Eu.version)){var i=bu.getOffsetPosition(t),o=Su.getBordersWidth(t),r=Su.getElementScroll(t),s=e.x-i.left-o.left,l=e.y-i.top-o.top,a=null;if(n)return l<r.top&&(a=l),l>t.clientHeight+r.top&&(a=l-t.clientHeight),null!==a&&Su.setScrollTop(t,Math.round(a));s<r.left&&(a=s),s>t.clientWidth+r.left&&(a=s-t.clientWidth),null!==a&&Su.setScrollLeft(t,Math.round(a))}}}(this.element,t),this.clientPoint=function(t,e){var n=yu.isTextEditableElement(t),i=yu.isInputElement(t);if(!n&&!yu.isContentEditableElement(t))return e;var o=bu.getOffsetPosition(t),r=Su.getBordersWidth(t),s=Su.getElementScroll(t),l=o.left+r.left+t.clientWidth;return i&&n&&(Eu.isFirefox||Eu.isIE&&10<Eu.version)?{x:Math.min(e.x,l),y:e.y}:{x:e.x-s.left,y:e.y-s.top}}(this.element,t);var e={element:Pc.documentElement,offsetX:this.clientPoint.x,offsetY:this.clientPoint.y,speed:this.speed};return this._move(e)},Wu.prototype._mousedown=function(){var n=this;return zt.leftButtonDown().then(function(){return Wu._calculateEventArguments(n.clientPoint)}).then(function(t){n.eventArgs=t;var e=(ku.isWebKit||ku.isIE)&&Lu.isSelectElement(n.element);return e&&n._bindMousedownHandler(),n.eventState.simulateDefaultBehavior=Ou[n.downEvent](n.eventArgs.element,n.eventArgs.options),!1===n.eventState.simulateDefaultBehavior&&(n.eventState.simulateDefaultBehavior=e&&!n.eventState.mousedownPrevented),n._focus()})},Wu.prototype._focus=function(){var n=this;return new Iu(function(t){var e=Lu.isContentEditableElement(n.element)?Fu.findContentEditableParent(n.element):n.element;Nu.focus(e,t,!1,!0)})},Wu.prototype._setSelection=function(){throw new Error("Not implemented")},Wu.prototype._mouseup=function(){var e=this;return zt.buttonUp().then(function(){return e._setSelection(),Wu._calculateEventArguments(e.clientPoint)}).then(function(t){e.eventArgs=t,Ou[e.upEvent](e.eventArgs.element,e.eventArgs.options)})},Wu.prototype.run=function(){var t=this;return this.absoluteStartPoint=this._calculateAbsoluteStartPoint(),this.absoluteEndPoint=this._calculateAbsoluteEndPoint(),this._moveToPoint(this.absoluteStartPoint).then(function(){return t._mousedown()}).then(function(){return t._moveToPoint(t.absoluteEndPoint)}).then(function(){return t._mouseup()})},Wu);function Wu(t,e){var n=Du.call(this,t,e,_c,zt)||this;return n.absoluteStartPoint=null,n.absoluteEndPoint=null,n.clientPoint=null,n.speed=e.speed,n.downEvent=Bu.isTouchDevice?"touchstart":"mousedown",n.upEvent=Bu.isTouchDevice?"touchend":"mouseup",n.eventArgs={options:null,element:null},n.eventState={mousedownPrevented:!1,simulateDefaultBehavior:!0},n}var Xu,Hu=y.textSelection,qu=y.domUtils,Gu=y.positionUtils,zu=(t(ju,Xu=Ru),ju.prototype._calculateAbsoluteStartPoint=function(){return Mu(this.element,this.startPos)||Gu.findCenter(this.element)},ju.prototype._calculateAbsoluteEndPoint=function(){var t=Mu(this.element,this.endPos);return t||(qu.isContentEditableElement(this.element)?function(t,e,n){for(var i=n<e?1:-1,o=n,r=null;o!==e&&!(r=Tu(t,o+=i)););return r=r||Tu(t,e)||bu.findCenter(t)}(this.element,this.startPos,this.endPos):Gu.findCenter(this.element))},ju.prototype._setSelection=function(){var t=qu.isTextEditableElement(this.element),e=qu.isContentEditableElement(this.element);(t||e)&&!1!==this.eventState.simulateDefaultBehavior&&Hu.select(this.element,this.startPos,this.endPos)},ju.prototype.run=function(t){var e=this;return this._ensureElement(t).then(function(){return Xu.prototype.run.call(e)})},ju);function ju(t,e,n,i){var o=Xu.call(this,t,i)||this;return o.startPos=e,o.endPos=n,o}var $u,Zu=y.textSelection,Ju=y.contentEditable,Qu=y.positionUtils,tc=(t(ec,$u=Ru),ec.prototype._calculateAbsoluteStartPoint=function(){return Uu(this.element,this.startNode,this.startOffset)||Qu.findCenter(this.element)},ec.prototype._calculateAbsoluteEndPoint=function(){return Uu(this.element,this.endNode,this.endOffset)||Qu.findCenter(this.element)},ec.prototype._setSelection=function(){var t,e;!1!==this.eventState.simulateDefaultBehavior&&(t={node:this.startNode,offset:this.startOffset},e={node:this.endNode,offset:this.endOffset},Zu.selectByNodesAndOffsets(t,e,!0))},ec);function ec(t,e,n){var i=$u.call(this,Ju.getNearestCommonAncestor(t,e),n)||this,o=Ju.getFirstVisiblePosition(t),r=Ju.getLastVisiblePosition(e),s={node:t,offset:o},l={node:e,offset:r},a=Ju.calculatePositionByNodeAndOffset(i.element,s);return Ju.calculatePositionByNodeAndOffset(i.element,l)<a&&(o=Ju.getLastVisiblePosition(t),r=Ju.getFirstVisiblePosition(e)),s=Ju.calculateNodeAndOffsetByPosition(t,o),l=Ju.calculateNodeAndOffsetByPosition(e,r),i.startNode=s.node,i.startOffset=s.offset,i.endNode=l.node,i.endOffset=l.offset,i}var nc=m.Promise,ic=m.utils.extend,oc=m.utils.browser,rc=m.eventSandbox.eventSimulator,sc=m.eventSandbox.elementEditingWatcher,lc=y.domUtils,ac=y.promiseUtils,uc=y.contentEditable,cc=y.textSelection,hc=y.delay,fc=y.KEY_MAPS.specialKeys,dc=(mc.findTextEditableChild=function(t){var e=null;if(!lc.isEditableElement(t))for(var n=t.querySelectorAll("*"),i=0;i<n.length;i++)if(lc.isTextEditableElementAndEditingAllowed(n[i])){e=n[i];break}return e},mc.prototype._calculateEventArguments=function(t){var e=lc.getActiveElement(),n=lc.isContentEditableElement(this.element),i=this.eventArgs.element||this.element;n||e===i||(i=mc.findTextEditableChild(e)||e);var o=ic({keyCode:t?this.currentCharCode:this.currentKeyCode},this.modifiers);return t&&(o.charCode=this.currentCharCode),ic(o,wa(t,this.currentKey,this.currentKeyIdentifier)),{element:i,options:o}},mc.prototype._calculateTargetElement=function(){var t=lc.getActiveElement(),e=lc.isContentEditableElement(this.element);if(e){if(t!==uc.findContentEditableParent(this.element))return void(this.eventState.skipType=!0)}else if(t!==this.element)return void(this.eventState.skipType=!0);this.element=e?this.element:t},mc.prototype._click=function(t){var e,n=this,i=lc.getActiveElement(),o=lc.isTextEditableElementAndEditingAllowed(this.element),r=lc.isContentEditableElement(this.element);if(i===this.element)return o&&sc.watchElementEditing(this.element),(o||r)&&(e=cc.getSelectionStart(this.element),isNaN(parseInt(this.caretPos,10))||this.caretPos===e||cc.select(this.element,this.caretPos,this.caretPos)),nc.resolve();var s=_e(this.element),l=s.offsetX,a=s.offsetY,u=new kr({offsetX:this.elementChanged?l:this.offsetX,offsetY:this.elementChanged?a:this.offsetY,speed:this.speed,caretPos:this.caretPos,modifiers:this.modifiers});return new xs(this.element,u,_c,zt).run(t).then(function(){return hc(n.automationSettings.mouseActionStepDelay)})},mc.prototype._type=function(){var t=this;if(this.eventState.skipType)return nc.resolve();var e=lc.isContentEditableElement(this.element);return this.replace&&(lc.isTextEditableElementAndEditingAllowed(this.element)?cc.select(this.element):e&&cc.deleteSelectionContents(this.element,!0)),ac.whilst(function(){return!t._isTypingFinished()},function(){return t._typingStep()})},mc.prototype._isTypingFinished=function(){return this.currentPos===this.typingText.length},mc.prototype._typingStep=function(){var t=this.typingText.charAt(this.currentPos);return this.currentKeyCode=ya(t),this.currentCharCode=this.typingText.charCodeAt(this.currentPos),this.currentKey=this.currentKeyCode===fc.enter?"Enter":t,this.currentKeyIdentifier=Sa(this.currentKey),this.ignoreChangeEvent=lc.getElementValue(this.element)===sc.getElementSavedValue(this.element),this._keydown(),this._keypress(),this._keyup()},mc.prototype._keydown=function(){this.eventArgs=this._calculateEventArguments(),this.eventState.simulateKeypress=rc.keydown(this.eventArgs.element,this.eventArgs.options)},mc.prototype._keypress=function(){!1!==this.eventState.simulateKeypress&&(this.eventArgs=this._calculateEventArguments(!0),this.eventState.simulateTypeChar=oc.isAndroid||rc.keypress(this.eventArgs.element,this.eventArgs.options))},mc.prototype._keyup=function(){var t=this,e=this.eventArgs.element;this.eventArgs=this._calculateEventArguments();var n=lc.isTextEditableElement(this.element),i=lc.isContentEditableElement(this.element),o=this.paste||!n&&!i;return nc.resolve().then(function(){return o?t._typeAllText(e):t._typeChar(e)}).then(function(){rc.keyup(t.eventArgs.element,t.eventArgs.options),o?t.currentPos=t.typingText.length:t.currentPos++})},mc.prototype._typeChar=function(t){if(!1===this.eventState.simulateKeypress||!1===this.eventState.simulateTypeChar)return this.ignoreChangeEvent&&sc.restartWatchingElementEditing(t),hc(this.automationSettings.keyActionStepDelay);var e=this.typingText.charAt(this.currentPos),n=/^\d$/.test(e),i=0===this.currentPos?null:this.typingText.charAt(this.currentPos-1);if(lc.isInputElement(t)&&"number"===t.type){var o=cc.getSelectionStart(t),r=lc.getInputValue(t).length,s=/^\d/.test(this.typingText);if(!n&&(s||!("."===e||"-"===e&&r)||0!==o))return hc(this.automationSettings.keyActionStepDelay);n&&("."===i||"-"===i&&!r)&&(e=i+e)}return sa(t,e,null),hc(this.automationSettings.keyActionStepDelay)},mc.prototype._typeAllText=function(t){return sa(t,this.typingText,this.caretPos),hc(this.automationSettings.keyActionStepDelay)},mc.prototype.run=function(t){var e=this;return this._click(t).then(function(){return e._calculateTargetElement()}).then(function(){return e._type()})},mc);function mc(t,e,n){this.element=mc.findTextEditableChild(t)||t,this.typingText=e.toString(),this.modifiers=n.modifiers,this.caretPos=n.caretPos,this.replace=n.replace,this.paste=n.paste,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=n.speed,this.automationSettings=new Me(this.speed),this.elementChanged=t!==this.element,this.currentPos=0,this.currentKeyCode=null,this.currentCharCode=null,this.currentKey=null,this.currentKeyIdentifier=null,this.ignoreChangeEvent=!0,this.eventArgs={options:null,element:null},this.eventState={skipType:!1,simulateKeypress:!0,simulateTypeChar:!0}}var pc=(vc.prototype.run=function(){var i=this;return c.doUpload(this.element,this.paths).then(function(t){if(t.length){var e=g.arrayUtils.map(t,function(t){return t.path}),n=g.arrayUtils.reduce(t,function(t,e){return t.concat(e.resolvedPaths)},[]);throw i.createError(e,n)}})},vc);function vc(t,e,n){this.element=t,this.paths=e,this.createError=n}var gc=y.domUtils,Ec=y.contentEditable,yc={};yc.DispatchEvent=ce,yc.SetScroll=bs,yc.ScrollIntoView=_s,yc.Click=xs,yc.SelectChildClick=zs,yc.DblClick=il,yc.DragToOffset=Fl,yc.DragToElement=Vl,yc.Hover=Xl,yc.Press=su,yc.RClick=vu,yc.SelectText=zu,yc.SelectEditableContent=tc,yc.Type=dc,yc.Upload=pc,yc.MouseOptions=Ur,yc.ClickOptions=kr,yc.TypeOptions=Xr,yc.ERROR_TYPES=Te,yc.AutomationSettings=Me,yc.getOffsetOptions=Pe,yc.calculateSelectTextArguments=function(t,e){void 0===e&&(e={});var n,i,o,r,s,l,a,u,c,h,f,d=gc.isTextEditableElement(t),m=d?0:Ec.getFirstVisiblePosition(t),p=d?gc.getElementValue(t).length:Ec.getLastVisiblePosition(t),v=e.startPos?Math.min(e.startPos,p):m,g=void 0===e.endPos||null===e.endPos?p:Math.min(e.endPos,p);return void 0!==e.offset?(g=0<=e.offset?Math.min(e.offset,g):(v=g,Math.max(0,g+e.offset)),{startPos:v,endPos:g}):void 0!==e.startLine?(n=t,i=e,o=gc.getTextAreaValue(n),r=o&&o.length?o.split("\n"):[],s=r.length-1,l=i.startLine?Math.min(i.startLine,s):0,a=r[l]?r[l].length:0,u=i.startPos?Math.min(i.startPos,a):0,c=void 0===i.endLine||null===i.endLine?s:Math.min(i.endLine,s),h=r[c]?r[c].length:0,f=void 0===i.endPos||null===i.endPos?h:Math.min(i.endPos,h),{startPos:gc.getTextareaPositionByLineAndOffset(n,l,0)+u,endPos:gc.getTextareaPositionByLineAndOffset(n,c,0)+f}):{startPos:v,endPos:g}},yc.cursor=zt,yc.getNextFocusableElement=Ea,yc.SHORTCUT_TYPE=Ma,yc.getSelectionCoordinatesByPosition=Mu,yc.getElementFromPoint=dl,yc.MoveAutomation=us;var bc=m.nativeMethods,Sc=m.EVENTS.evalIframeScript;bc.objectDefineProperty(_c,"%testCafeAutomation%",{configurable:!0,value:yc}),m.on(Sc,function(t){return wc(bc.contentWindowGetter.call(t.iframe))})}(_c["%testCafeCore%"],_c["%testCafeUI%"],_c["%hammerhead%"].Promise,_c["%hammerhead%"])}(window);